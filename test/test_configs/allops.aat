	SECTION	"RST00",HOME[$00]
RST_00:	
	LD L,0x00
	jp	BRSTA

	SECTION	"RST08",HOME[$08]
RST_08:	
	LD L,0x08
	jp	BRSTB

	SECTION	"RST10",HOME[$10]
RST_10:
	LD L,0x10
	jp	BRSTC

	SECTION	"RST18",HOME[$18]
RST_18:
	LD L,0x18
	jp	BRSTD

	SECTION	"RST20",HOME[$20]
RST_20:
	LD L,0x20
	jp	BRSTE

	SECTION	"RST28",HOME[$28]
RST_28:
	LD L,0x28
	jp	BRSTF

	SECTION	"RST30",HOME[$30]
RST_30:
	LD L,0x30
	jp	BRSTG

	SECTION	"RST38",HOME[$38]
RST_38:
	LD L,0x38
	jp	BRSTH

	SECTION	"VBlankIRQ",HOME[$40]
VBL_VECT:
	LD L,0x40
	reti
	
	SECTION	"LCDIRQ",HOME[$48]
LCD_VECT:
	LD L,0x48
	reti

	SECTION	"TimerIRQ",HOME[$50]
TIMER_VECT:
	LD L,0x50
	reti

	SECTION	"SerialIRQ",HOME[$58]
SERIAL_VECT:
	LD L,0x58
	reti

	SECTION	"JoypadIRQ",HOME[$60]
JOYPAD_VECT:
	LD L,0x60
	reti

SECTION "START",HOME[0x100]
NOP
JP 0x200 
	;; $0104-$0133 (Nintendo logo - do _not_ modify the logo data here or the GB will not run the program)
	DB	$CE,$ED,$66,$66,$CC,$0D,$00,$0B,$03,$73,$00,$83,$00,$0C,$00,$0D
	DB	$00,$08,$11,$1F,$88,$89,$00,$0E,$DC,$CC,$6E,$E6,$DD,$DD,$D9,$99
	DB	$BB,$BB,$67,$63,$6E,$0E,$EC,$CC,$DD,$DC,$99,$9F,$BB,$B9,$33,$3E

	;; $0134-$013E (Game title - up to 11 upper case ASCII characters; pad with $00)
	DB	"TEST GBCPU"
	;; $013F-$0142 (Product code - 4 ASCII characters, assigned by Nintendo, just leave blank)
	DB	"    "
	;; $0143 (Color GameBoy compatibility code)
	DB	$00	;; $00 - DMG 
			;; $80 - DMG/GBC
			;; $C0 - GBC Only cartridge
	;; $0144 (High-nibble of license code - normally $00 if $014B != $33)
	DB	$00
	;; $0145 (Low-nibble of license code - normally $00 if $014B != $33)
	DB	$00
	;; $0146 (GameBoy/Super GameBoy indicator)
	DB	$00	;; $00 - GameBoy
	;; $0147 (Cartridge type - all Color GameBoy cartridges are at least $19)
	DB	$00	;; $00 - ROM Only
	;; $0148 (ROM size)
	DB	$00	;; $00 - 256Kbit = 32Kbyte = 2 banks
	;; $0149 (RAM size)
	DB	$00	;; $00 - None
	;; $014A (Destination code)
	DB	$00	;; $01 - All others
			;; $00 - Japan
	;; $014B (Licensee code - this _must_ be $33)
	DB	$33	;; $33 - Check $0144/$0145 for Licensee code.
	;; $014C (Mask ROM version - handled by RGBFIX)
	DB	$00
	;; $014D (Complement check)
	DB	$00
	;; $014E-$014F (Cartridge checksum)
	DB	$00,$00

SECTION "TEST",HOME[0x200]
NOP ; CYCLES=4
LD BC,0x100 ; BC=0xC500 CYCLES=12
LD A,0xFF ; A=0xFF CYCLES=8
LD (BC),A ; MEM[0xC500]=0xFF CYCLES=8
INC BC ; BC=0xC501 CYCLES=8
INC B ; B=0xC6 BC=0xC601 CYCLES=4
DEC B ; B=0xC5 BC=0xC501 CYCLES=4
LD B,0xC1 ; B=0xC1 BC=0xC101 CYCLES=8
RLCA ; A=0xFE F=0x10 CYCLES=4
LD HL,0xC5C5 ; H=0xC5 L=0xC5 HL=0xC5 CYCLES=12
LD SP,HL ; SP=0xC5C5 CYCLES=8
LD (0xC500),SP ; MEM[0xC500]=0xC5C5 CYCLES=20
LD HL,SP+0x02 ; HL=0xC5C7 SP=0xC5C5 CYCLES=12
ADD HL,BC ; HL=0x86C8 BC=0xC101 F=0x10 CYCLES=8
LD (HL),0x02 ; HL=0x86C8 MEM[0x86C8]=0x02 CYCLES=12 
LD A,(HL+) ; HL=0x86C9 A=0x02 MEM[0x86C8]=0x02 CYCLES=8
LD A,(BC) ; A=0x0 BC=0xC101 CYCLES=8
DEC BC ; BC=0xC100 CYCLES=8
INC C ; C=0x01 BC=0xC101 CYCLES=4
DEC C ; C=0x00 BC=0xC100 CYCLES=4
LD C,0xEE ; C=0xEE BC=0xC1EE CYCLES=8
INC A ; A=0x01 CYCLES=4
RRCA ; A=0x00 F=0x10 CYCLES=4
LD DE,0xC400 ; DE=0xC400 CYCLES=12
LD (DE),A ; MEM[0xC400]=0x0 CYCLES=8
INC DE ; DC=0xC401 CYCLES=8
INC D ; D=0x02 CYCLES=4
DEC D ; D=0x01 CYCLES=4
LD D,0x16 ; D=0x16 CYCLES=8
RLA ; A=0x0 F=0x80 CYCLES=4
LD E,0xCC ; E=0xCC D=0x16 DE=0x16EE CYCLES=8
ADD HL,DE ; HL=0x9DB7 F=0x20 CYCLES=8
LD DE,0xC400 ; DE=0xC400 CYCLES=12
DEC A ; A=0xFF F=0x50 CYCLES=4
LD A,(DE) ; A=0x0 CYCLES=8
DEC DE ; DE=0xC3FF CYCLES=8
INC E ; DE=0xC300 E=0x00 D=0xC3 CYCLES=4
DEC E ; DE=0xC3FF E=0xFF D=0xC3 CYCLES=4
LD HL, 0xE300 ; HL=0xE300 CYCLES=12
ADD HL,HL ; HL=0xC600 CYCLES=8
LD A,0x20 ; A=0x20 CYCLES=8
LD (HL+),A ; MEM[0xC600]=0x20 HL=0xC601 CYCLES=8
INC HL ; HL=0xC602 CYCLES=8
INC H ; H=0xC7 HL=0xC702 CYCLES=4
DEC H ; H=0xC6 HL=0xC602 CYCLES=4
LD H,0xC3 ; H=0xC3 HL=0xC302 CYCLES=8
LD L,0x00 ; L=0x00 HL=0xC300 CYCLES=8
DEC HL ; H=0xC2 HL=0xC2FF L=0xFF CYCLES=8
INC L ; H=0xC2 HL=0xC200 L=0x00 F=0x10 CYCLES=4
DEC L ; H=0xC2 HL=0xC2FF L=0xFF F=0x40 CYCLES=4
CPL ; A=0xDF F=0x60 CYCLES=4
RRA ; A=0x6F F=0x10 CYCLES=4

LD SP,0xFF00 ; SP=0xFF00 CYCLES=12
ADD SP,0x03 ; SP=0xFF03 CYCLES=16
LD (HL-),A ; HL=0xC2FE MEM[0xC2FF]=0x6F A=0x6F CYCLES=8
INC SP ; SP=0xFF04 CYCLES=8
INC (HL) ; MEM[0xC2FE]=0x01 HL=0xC2FE CYCLES=12
DEC (HL) ; MEM[0xC2FE]=0x00 HL=0xC2FE CYCLES=12
ADD HL,SP ; HL=0xC202 SP=0xFF04 CYCLES=8
DEC SP ; SP=0xFF03 CYCLES=8

PUSH BC ; SP=0xFF01 MEM[0xFF03]=0xC1 MEM[0xFF02]=0x00 CYCLES=16
PUSH DE ; SP=0xFEFE MEM[0xFF01]=0xC3 MEM[0xFEFF]=0xFF CYCLES=16
PUSH HL ; SP=0xFEFC MEM[0xFEFE]=0xC2 MEM[0xFEFD]=0x02 CYCLES=16
PUSH AF ; SP=0xFEFA MEM[0xFEFC]=0x6F MEM[0xFEFB]=0x10 CYCLES=16
POP BC ; SP=0xFEFC BC=0x6F10 CYCLES=12
POP AF ; SP=0xFEFE AF=0xC202 CYCLES=12
POP HL ; SP=0xFF01 HL=0xC3FF CYCLES=12
POP DE ; SP=0xFF03 DE=0xC100 CYCLES=12

SUB 0xC0 ; A=0x02 F=0x00 CYCLES=8
SBC A,0x1 ; A=0x01 CYCLES=8
LDH (0x0F),A ; A=0x01 MEM[0xFF0F]=0x01 CYCLES=12

SCF ; F=0x10 CYCLES=4
CCF ; F=0x00 CYCLES=4

LD A,(HL-) ; CYCLES=8 A=0x20 MEM[0xC600]=0x00 HL=0xC5FF
LD (HL),0x02 ; HL=0xC5FF MEM[0xC5FF]=0x02 CYCLES=12

LD B,(HL) ; CYCLES=8 B=0x02 MEM[0xC5FF]=0x02 HL=0xC5FF
LD C,(HL) ; CYCLES=8 C=0x02 MEM[0xC5FF]=0x02 HL=0xC5FF
LD D,(HL) ; CYCLES=8 D=0x02 MEM[0xC5FF]=0x02 HL=0xC5FF
LD E,(HL) ; CYCLES=8 E=0x02 MEM[0xC5FF]=0x02 HL=0xC5FF
LD H,(HL) ; CYCLES=8 H=0x02 MEM[0xC5FF]=0x02 HL=0xC5FF
LD L,(HL) ; CYCLES=8 L=0x02 MEM[0xC5FF]=0x02 HL=0xC5FF
LD (HL),B ; CYCLES=8 B=0x02 MEM[0xC5FF]=0x02 HL=0xC5FF
LD (HL),C ; CYCLES=8 B=0x00 MEM[0xC5FF]=0x02 HL=0xC5FF
LD (HL),D ; CYCLES=8 B=0x00 MEM[0xC5FF]=0x02 HL=0xC5FF
LD (HL),E ; CYCLES=8 B=0x00 MEM[0xC5FF]=0x02 HL=0xC5FF
LD (HL),H ; CYCLES=8 B=0x00 MEM[0xC5FF]=0x02 HL=0xC5FF
LD (HL),L ; CYCLES=8 B=0x00 MEM[0xC5FF]=0x02 HL=0xC5FF
LD (HL),A ; CYCLES=8 B=0x00 MEM[0xC5FF]=0x02 HL=0xC5FF
LD A,(HL) ; CYCLES=8 B=0x00 MEM[0xC5FF]=0x02 HL=0xC5FF

LD A,5 ; A=0x05 CYCLES=4
LD B,0x6 ; B=0x06 CYCLES=4
LD C,0x80 ; C=0x80 CYCLES=4
LD E,12 ; E=0x0C CYCLES=4
LD D,0xFF ; D=0xFF CYCLES=4
LD H,0xC6 ; H=0xC6 CYCLES=4
LD L,0x00 ; L=0x00 CYCLES=4

LD B,B ; CYCLES=4 B=0x06
LD B,C ; CYCLES=4 B=0x80
LD B,D ; CYCLES=4 B=0xFF
LD B,E ; CYCLES=4 B=0x0C
LD B,H ; CYCLES=4 B=0xC6
LD B,L ; CYCLES=4 B=0x00
LD B,A ; CYCLES=4 B=0x05
LD B,0x06

LD C,B ; CYCLES=4 C=0x06
LD C,C ; CYCLES=4 C=0x06
LD C,D ; CYCLES=4 C=0xFF
LD C,E ; CYCLES=4 C=0x0C
LD C,H ; CYCLES=4 C=0xC6
LD C,L ; CYCLES=4 C=0x00
LD C,A ; CYCLES=4 C=0x05
LD C,0x80

LD D,B ; CYCLES=4 D=0x06
LD D,C ; CYCLES=4 D=0x80
LD D,D ; CYCLES=4 D=0x80
LD D,E ; CYCLES=4 D=0x0C
LD D,H ; CYCLES=4 D=0xC6
LD D,L ; CYCLES=4 D=0x00
LD D,A ; CYCLES=4 D=0x05
LD D,0xFF

LD E,B ; CYCLES=4 E=0x06
LD E,C ; CYCLES=4 E=0x80
LD E,D ; CYCLES=4 E=0xFF
LD E,E ; CYCLES=4 E=0xFF
LD E,H ; CYCLES=4 E=0xC6
LD E,L ; CYCLES=4 E=0x00
LD E,A ; CYCLES=4 E=0x05
LD E,12

LD H,B ; CYCLES=4 H=0x06
LD H,C ; CYCLES=4 H=0x80
LD H,D ; CYCLES=4 H=0xFF
LD H,E ; CYCLES=4 H=0x0C
LD H,H ; CYCLES=4 H=0x0C
LD H,L ; CYCLES=4 H=0x00
LD H,A ; CYCLES=4 H=0x05
LD H,0xC6

LD L,B ; CYCLES=4 L=0x06
LD L,C ; CYCLES=4 L=0x80
LD L,D ; CYCLES=4 L=0xFF
LD L,E ; CYCLES=4 L=0x0C
LD L,H ; CYCLES=4 L=0xC6
LD L,L ; CYCLES=4 L=0xC6
LD L,A ; CYCLES=4 L=0x05
LD L,0x00 ; CYCLES=8 L=0x00

LD A,B ; CYCLES=4 A=0x06
LD A,C ; CYCLES=4 A=0x80
LD A,D ; CYCLES=4 A=0xFF
LD A,E ; CYCLES=4 A=0x0C
LD A,H ; CYCLES=4 A=0xC6
LD A,L ; CYCLES=4 A=0x00
LD A,A ; CYCLES=4 A=0x00
LD A,0x05 ; CYCLES=8 A=0x05

ADD A,B ; CYCLES=4 A=0x0B B=0x06 F=0x00
ADD A,C ; CYCLES=4 A=0x8B C=0x80 F=0x00
ADD A,D ; CYCLES=4 A=0x8A D=0xFF F=0x10
ADD A,E ; CYCLES=4 A=0x96 E=0x0C F=0x00
ADD A,H ; CYCLES=4 A=0x5C H=0xC6 F=0x10
ADD A,L ; CYCLES=4 A=0x5C L=0x00 F=0x00
ADD A,(HL) ; CYCLES=8 A=0x5E MEM[0xC600]=0x02 F=0x00
ADD A,A ; CYCLES=4 A=0xBC F=0x00
LD A,0x05 ; CYCLES=4 A=0x05
ADC A,B ; CYCLES=4 A=0x0B B=0x06 F=0x00
ADC A,C ; CYCLES=4 A=0x8B C=0x80 F=0x00
ADC A,D ; CYCLES=4 A=0x8B D=0xFF F=0x10 
ADC A,E ; CYCLES=4 A=0x96 E=0x0C F=0x00
ADC A,H ; CYCLES=4 A=0x5C H=0xC6 F=0x10
ADC A,L ; CYCLES=4 A=0x5C L=0x00 F=0x00
ADC A,(HL) ; CYCLES=8 A=0x5E MEM[0xC600]=0x02 F=0x00
ADC A,A ; CYCLES=4 A=0xBC F=0x00
LD A, 0x10 ; CYCLES=8 A=0x10
LD B, 0x04 ; CYCLES=8 B=0x04
SUB B ; A=0x0C B=0x04 F=0x30 CYCLES=4
LD C,1 ; CYCLES=8 C=0x01
SUB C ; CYCLES=4 A=0x0B C=0x01
LD D,2 ; CYCLES=8 D=0x02
SUB D ; CYCLES=4 A=0x09 D=0x02
LD E,3 ; CYCLES=8 E=0x03
SUB E ; CYCLES=4 A=0x06 E=0x03
LD H,0x02 ; CYCLES=8 H=0x02
SUB H ; CYCLES=4 A=0x04 H=0x02
SUB L ; CYCLES=4 A=0x04 L=0x00
LD HL, 0xC600 ; CYCLES=12 HL=0xC600
LD (HL),0x05 ; CYCLES=12 MEM[0xC600]=0x05 HL=0xC600
LD A,0x06 ; CYCLES=8 A=0x06
SUB (HL) ; CYCLES=8 A=0x01 MEM[0xC600]=0x05 HL=0x0C600
SUB A ; CYCLES=4 A=0x00 F=0x80

LD A,0x10 ; CYCLES=8 A=0x10 

LD A,0x02
LD B,0x02
LD C,0x03
LD D,0x04
LD E,0x0A
LD H,0x06
LD L,0x07
LD (HL),0x08

SBC A,B ; CYCLES=4 A=0x00 B=0x02 F=0xF0
SBC A,C ; CYCLES=4 A=0xFD C=0x03 F=0x40
SBC A,D ; CYCLES=4 A=0xF9 D=0x04 F=0x70
SBC A,E ; CYCLES=4 A=0xEF E=0x0A F=0x70 
SBC A,H ; CYCLES=4 A=0xE9 H=0x06 F=0x60
SBC A,L ; CYCLES=4 A=0xE2 L=0x70 F=0xE0
LD HL,0xC600
LD (HL),0x80
SBC A,(HL) ; CYCLES=4 MEM[0xC600]=0x80 A=0x62 F=0x70
SBC A,A ; CYCLES=4 A=0x00 F=0xC0

LD A,0x02
LD B,0x02
AND B ; CYCLES=4 A=0x02 F=0x20
LD A, 0x02
LD C, 0x03
AND C ; CYCLES=4 A=0x00 F=0x50
LD A,0xF0
LD D,0x80
AND D ; CYCLES=4 A=0x80 F=0x20
LD A,0xF0
LD E,0x80
AND E ; CYCLES=4 A=0x80
LD A,0xF0
LD H,0x80
AND H ; CYCLES=4 A=0x80
LD A,0xF0
LD L,0x80
AND L ; CYCLES=4 A=0x80
LD A,0xF0
LD HL,0xC600
LD (HL),0x80
AND (HL) ; CYCLES=8 A=0x80
AND A ; CYCLES=4 A=0x80

LD A,0xF0
LD B,0x0F
XOR B ; CYCLES=4 A=0xFF F=0x00
LD C,0xF0
XOR C ; CYCLES=4 A=0x0F F=0x00
LD D,0x0F
XOR D ; CYCLES=4 A=0x00 F=0x80
LD E, 0x04
XOR E ; CYCLES=4 A=0x04 F=0x00
LD H, 0xAA
XOR H ; CYCLES=4 A=0xAE F=0x00
LD L, 0xAE
XOR L ; CYCLES=4 A=0x00 F=0x00
LD HL,0xC600
XOR (HL) ; CYCLES=8 A=0x80 F=0x00
XOR A ; CYCLES=4 A=0x00 F=0x80

LD A,0xF0
LD B,0x0F
OR B ; CYCLES=4 A=0xFF F=0x00
LD C,0xF0
OR C ; CYCLES=4 A=0xFF F=0x00
LD D,0x00
OR D ; CYCLES=4 A=0x00 F=0x80
LD E, 0x04
OR E ; CYCLES=4 A=0x04 F=0x00
LD H, 0xAA
OR H ; CYCLES=4 A=0xAE F=0x00
LD L, 0xAE
OR L ; CYCLES=4 A=0xAE F=0x00
LD HL,0xC600
OR (HL) ; CYCLES=8 A=0xAE F=0x00
OR A ; CYCLES=4 A=0xAE F=0x00

LD B,0xFF
LD A,0xFF
CP B ; CYCLES=4 A=0xFF B=0xFF F=0xC0
LD C,0xF1
CP C ; CYCLES=4 A=0xFF C=0xF1 F=0x40
LD D, 0xFF
LD A, 0xF1
CP D ; CYCLES=4 A=0xF1 D=0xFF F=0x70
LD E, 0x02
CP E ; CYCLES=4 A=0xF1 E=0x02 F=0x60
LD A,0x80
LD H,0x90
CP H ; CYCLES=4 A=0x80 H=0x90 F=0x50
LD L,0x00
CP L ; CYCLES=4 A=0x80 L=0x00 F=0x40
LD HL, 0xC600
CP (HL) ; CYCLES=8 A=0x80 MEM[0xC600]=0x80 F=0xC0
LD A,0xFF
CP A ; CYCLES=4 A=0x00

LD A,0xFF
ADD A,0x01 ; CYCLES=8 A=0x00 F=0xB0
ADC A,0x01 ; CYCLES=8 A=0x02 F=0x00
SUB A,0x03 ; CYCLES=8 A=0xFF F=0x40
SBC A,0x01 ; CYCLES=8 A=0xFE F=0x70

LD A,0xF0
AND 0x80 ; CYCLES=8 A=0x80 F=0x20
CP 0x01 ; CYCLES=8 A=0x80 F=0x50
XOR 0x81 ; CYCLES=8 A=0x01 F=0x00

LDH 0x01,A ; CYCLES=12 MEM[0xFF01]=0x01 A=0x01
LD A,0x00
LDH A,0x01 ; CYCLES=12 A=0x01 MEM[0xFF01]=0x01

LD A,0x0001 ; CYCLES=16 A=0x00 F=0x01
LD C,0x01
LD A,(C) ; CYCLES=12 A=0x01 MEM[0xFF01]=0x01
LD (0xFF02),A ; CYCLES=16 MEM[0xFF02]=0x01 A=x01
LD A=0x02
LD C,0x02
LD (C),A ; CYCLES=12 MEM[0xFF02]=0x02 A=0x02
OR 0x80; CYCLES=8 A=0x82 F=0x00

LD L,0x11
RST 00H ; CYCLES=16
BRSTA: NOP ; L=0x00
RST 08H ; CYCLES=16
BRSTB: NOP ; L=0x08
RST 10H ; CYCLES=16
BRSTC: NOP ; L=0x10
RST 18H ; CYCLES=16
BRSTD: NOP ; L=0x18
RST 20H ; CYCLES=16
BRSTE: NOP ; L=0x20
RST 28H ; CYCLES=16
BRSTF: NOP ; L=0x28
RST 30H ; CYCLES=16
BRSTG: NOP ; L=0x30
RST 38H ; CYCLES=16
BRSTH: NOP ; L=0x38

LD A,0x00
JR 0x01 ; CYCLES=12
LD A,0x01
NOP ; A=0x00

LD A,0x00
XOR 0x01 ; F=0x00
JR NZ,0x01 ; CYCLES=8
LD A,0x01
NOP ; A=0x01

XOR 0x00 ; F=0x80
JR NZ,0x01; CYCLES=12
LD A,0x00
NOP ; A=0x01

OR 0x01 ; A=0x01 F=0x00
JR Z,0x01 ; CYCLES=8
LD A,0x00
NOP ; A=0x00

XOR 0x00 ; A=0x00 F=0x80
JR Z,0x01 ; CYCLES=12
LD A,0x01
NOP ; A=0x00

SCF
CCF
LD A,0x00
JR C,0x01 ; CYCLES=8
LD A,0x01
NOP ; A=0x00
CCF
JR C,0x01 ; CYCLES=12
LD A,0x01
NOP ; A=0x01

XOR 0x01 ; A=0x00 F=0x80
JP NZ,JP_TEST_NZ ; CYCLES=12
LD A,0x01
JP_TEST_NZ: NOP ; A=0x01

OR 0x01 ; A=0x01 F=0x00
JP NZ,JP_TEST_NZ_J ; CYCLES=16
LD A,0x05
JP_TEST_NZ_J: NOP ; A=0x01

LD A,0x00
JP JPTEST ; CYCLES=16
LD A,0x01
JPTEST: NOP ; A=0x00

OR 0x01 ; A=0x01 F=0x00
JP Z,JP_TEST_Z ; CYCLES=12
LD A,0x02
JP_TEST_Z: NOP ; A=0x02

XOR 0x02 ; A=0x00 F=0x80
JP Z, JP_TEST_Z_J; CYCLES=16
LD A,0x02
JP_TEST_Z_J: NOP ; A=0x00

SCF
JP NC,JP_TEST_NC ; CYCLES=12
LD A,0x01
JP_TEST_NC: NOP ; A=0x01

CCF
JP NC,JP_TEST_NC_J ; CYCLES=16
LD A,0x02
JP_TEST_NC_J: NOP ; A=0x01

JP C,JP_TEST_C ; CYCLES=12
LD A,0x02
JP_TEST_C: NOP ; A=0x02

SCF
JP, C,JP_TEST_C_J ; CYCLES=16
LD A,0x01
JP_TEST_C_J: NOP ; A=0x02

LD HL, 0xC600
LD (HL),JP_TEST_MEM
LD A,0x00
JP (HL) ; CYCLES=4
LD A,0x01
JP_TEST_MEM: NOP ; A=0x00

LD D,0x00
CALL FUNCTION_ONE ; CYCLES=24
NOP ; D=0x05

LD A,0x00
LD D,0x00
OR 0x00 ; F=0x80
CALL NZ,FUNCTION_ONE ; CYCLES=12
NOP ; D=0x00

OR 0x01 ; F=0x00
CALL NZ,FUNCTION_ONE ; CYCLES=24
NOP ; D=0x05

LD D,0x00
CCF
CALL C,FUNCTION_ONE ; CYCLES=12
NOP ; D=0x00

SCF
CALL C,FUNCTION_ONE ; CYCLES=24
NOP ; D=0x05

LD D,0x00
CALL NC,FUNCTION_ONE ; CYCLES=12
NOP ; D=0x00

CCF
CALL NC,FUNCTION_ONE ; CYCLES=24
NOP ; D=0x05

LD A,0x00
LD D,0x00
OR 0x01 ; A=0x01 F=0x00
CALL Z,FUNCTION_ONE ; CYCLES=12
NOP ; D=0x00

XOR 0x01 ; A=0x00 F=0x80
CALL Z,FUNCTION_ONE ; CYCLES=24
NOP ; D=0x05

LD A,0x0F
ADD 0x01 
DAA ; CYCLES=4 A=0x16
LD A,0xF0
ADD 0x10
DAA ; CYCLES=4 A=0x60
LD A,0xFF
ADD 0x01
DAA ; CYCLES=4 A=0x66

LD A,0x01
OR 0x01 ; A=0x01 F=0x00
CALL TEST_Z
NOP ; A=0x80

LD A,0x01
XOR 0x01 ; A=0x00 F=0x80
CALL TEST_Z_J
NOP ; A=0x00

CALL TEST_NZ
NOP ; A=0x80

LD A,0x01
OR 0x01 ; A=0x01 F=0x00
CALL TEST_NZ_J
NOP ; A=0x00

SCF
CCF
CALL TEST_C
NOP ; A=0x80

SCF
CALL TEST_C_J
NOP ; A=0x00

CALL TEST_NC
NOP ; A=0x80

CCF
CALL TEST_NC_J
NOP ; A=0x00

CALL TEST_RET
NOP ; A=0x00

DI ; CYCLES=4 INTERRUPTS=0

CALL TEST_RETI
NOP ; A=0x00 INTERRUPTS=1

DI ; CYCLES=4 INTERRUPTS=0

EI ; CYCLES=4 INTERRUPTS=1

LD B,0x07 ; 00000110 8+4 12 
SCF
RLC B ; CYCLES=8 F=0x00 B=0x0C
LD C,0xFF
RLC C ; CYCLES=8 F=0x10 C=0xFF
CCF
LD D,0x40
RLC D ; CYCLES=8 D=0x80 F=0x00
CCF
LD E,0x80
RLC E ; CYCLES=8 E=0x01 F=0x10
LD H,0x01
RLC H ; CYCLES=8 H=0x02 F=0x00
LD L,0x08 
RLC L ; CYCLES=8 L=0x10 F=0x00
LD HL,0xC600
LD (HL) 0x00
RLC (HL) ; CYCLES=12 MEM[0xC600]=0x00 F=0x80
SCF
LD A,0x11
RLC A ; CYCLES=8 A=0x22 F=0x00

SCF
RRC B ; CYCLES=8 B=0x07 F=0x00
RRC C ; CYCLES=8 C=0xFF F=0x10
CCF
RRC D ; CYCLES=8 D=0x40 F=0x00
CCF
RRC E ; CYCLES=8 E=0x80 F=0x10
LD H,0x02
RRC H ; CYCLES=8 H=0x01 F=0x00
LD L,0x10
RRC L ; CYCLES=8 L=0x08 F=0x00
LD HL,0xC600
RRC (HL) ; CYCLES=12 MEM[0xC600]=0x00 F=0x80
RRC A ; CYCLES=8 A=0x11 F=0x00

SCF
LD B, 0x80
RL B ; CYCLES=8 B=0x01 F=0x10
CCF
RL C ; CYCLES=8 C=0xFE F=0x10
RL D ; CYCLES=8 D=0x81 F=0x00
RL E ; CYCLES=8 E=0x00 F=0x90
LD H,0x01
RL H ; CYCLES=8 H=0x03 F=0x00
LD L,0x08
RL L ; CYCLES=8 L=0x10 F=0x00
LD HL,0xC600
RL (HL) ; CYCLES=12 MEM[0xC600]=0x00 F=0x80
RL A ; CYCLES=8 A=0x22 F=0x00

SCF
RR B ; CYCLES=8 B=0x01 F=0x10
CCF
RR C ; CYCLES=8 C=0xFF F=0x00
RR D ; CYCLES=8 D=0x40 F=0x10
RR E ; CYCLES=8 E=0x80 F=0x00
LD H,0x03
RR H ; CYCLES=8 H=0x01 F=0x10
LD L,0x10
RR L ; CYCLES=8 L=0x88 F=0x00
RR (HL) ; CYCLES=12
RR A ; CYCLES=8 A=0x11 F=0x00

SLA B ; CYCLES=8 B=0x02 F=0x00
SLA C ; CYCLES=8 C=0xFE F=0x10
SLA D ; CYCLES=8 D=0x80 F=0x00
SLA E ; CYCLES=8 E=0x00 F=0x90
LD H,0x01
SLA H ; CYCLES=8 H=0x02 F=0x00
LD L,0x88
SLA L ; CYCLES=8 L=0x10 F=0x10
LD HL,0xC600
SLA (HL) ; CYCLES=12 MEM[0xC600]=0x00 F=0x80
SLA A ; CYCLES=8 A=0x22 F=0x00

SRA B ; CYCLES=8 B=0x01 F=0x00
SRA C ; CYCLES=8 C=0xFF F=0x00
SRA D ; CYCLES=8 D=0x40 F=0x00
LD E,0x01
SRA E ; CYCLES=8 E=0x00 F=0x90 
LD H,0x02
SRA H ; CYCLES=8 H=0x01 F=0x00
LD L,0x10
SRA L ; CYCLES=8 L =0x08 F=0x00
LD HL,0xC600
SRA (HL) ; CYCLES=12 MEM[0xC600]=0x00 F=0x80
SRA A ; CYCLES=8 A=0x11 F=0x00

SWAP B ; CYCLES=8 B=0x10 F=0x00
SWAP C ; CYCLES=8 C=0xFF F=0x00
SWAP D ; CYCLES=8 D=0x04 F=0x00
SWAP E ; CYCLES=8 E=0x00 F=0x80
SWAP H ; CYCLES=8 H=0x6C F=0x00
SWAP L ; CYCLES=8 L=0x00 F=0x80
LD HL,0xC600
LD (HL),0x50
SWAP (HL) ; CYCLES=12 MEM[0xC600]=0x05 F=0x00
SWAP A ; CYCLES=8 A=0x11 F=0x00

SRL B ; CYCLES=8 B=0x08 F=0x00
SRL C ; CYCLES=8 C=0x7F F=0x10
SRL D ; CYCLES=8 D=0x02 F=0x00
SRL E ; CYCLES=8 E=0x00 F=0x80
SRL H ; CYCLES=8 H=0x63 F=0x00
SRL L ; CYCLES=8 L=0x00 F=0x80
LD HL,0xC600
SRL (HL) ; CYCLES=12 MEM[0xC600]=0x02 F=0x10
SRL A ; CYCLES=8 A=0x08 F=0x10

LD BC, 0xFFFF
LD DE, 0xFFFF
LD HL, 0xFFFF
LD A, 0xFF
RES 0,B ; CYCLES=8 B=0xFE
RES 0,C ; CYCLES=8 C=0xFE
RES 0,D ; CYCLES=8 D=0xFE
RES 0,E ; CYCLES=8 E=0xFE
RES 0,H ; CYCLES=8 H=0xFE
RES 0,L ; CYCLES=8 L=0xFE
RES 0,A ; CYCLES=8 A=0xFE
RES 1,B ; CYCLES=8 B=0xFC
RES 1,C ; CYCLES=8 C=0xFC
RES 1,D ; CYCLES=8 D=0xFC
RES 1,E ; CYCLES=8 E=0xFC
RES 1,H ; CYCLES=8 H=0xFC
RES 1,L ; CYCLES=8 L=0xFC
RES 1,A ; CYCLES=8 A=0xFC
RES 2,B ; CYCLES=8 B=0xF8
RES 2,C ; CYCLES=8 C=0xF8
RES 2,D ; CYCLES=8 D=0xF8
RES 2,E ; CYCLES=8 E=0xF8
RES 2,H ; CYCLES=8 H=0xF8
RES 2,L ; CYCLES=8 L=0xF8
RES 2,A ; CYCLES=8 A=0xF8
RES 3,B ; CYCLES=8 B=0xF0
RES 3,C ; CYCLES=8 C=0xF0
RES 3,D ; CYCLES=8 D=0xF0
RES 3,E ; CYCLES=8 E=0xF0
RES 3,H ; CYCLES=8 H=0xF0
RES 3,L ; CYCLES=8 L=0xF0
RES 3,A ; CYCLES=8 A=0xF0

RES 4,B ; CYCLES=8 B=0xE0
RES 4,C ; CYCLES=8 C=0xE0
RES 4,D ; CYCLES=8 D=0xE0
RES 4,E ; CYCLES=8 E=0xE0
RES 4,H ; CYCLES=8 H=0xE0
RES 4,L ; CYCLES=8 L=0xE0
RES 4,A ; CYCLES=8 A=0xE0

RES 5,B ; CYCLES=8 B=0xC0
RES 5,C ; CYCLES=8 C=0xC0
RES 5,D ; CYCLES=8 D=0xC0
RES 5,E ; CYCLES=8 E=0xC0
RES 5,H ; CYCLES=8 H=0xC0
RES 5,L ; CYCLES=8 L=0xC0
RES 5,A ; CYCLES=8 A=0xC0

RES 6,B ; CYCLES=8 B=0x80
RES 6,C ; CYCLES=8 C=0x80
RES 6,D ; CYCLES=8 D=0x80
RES 6,E ; CYCLES=8 E=0x80
RES 6,H ; CYCLES=8 H=0x80
RES 6,L ; CYCLES=8 L=0x80
RES 6,A ; CYCLES=8 A=0x80

RES 7,B ; CYCLES=8 B=0x00
RES 7,C ; CYCLES=8 C=0x00
RES 7,D ; CYCLES=8 D=0x00
RES 7,E ; CYCLES=8 E=0x00
RES 7,H ; CYCLES=8 H=0x00
RES 7,L ; CYCLES=8 L=0x00
RES 7,A ; CYCLES=8 A=0x00

LD HL, 0xC600
LD (HL), 0xFF
RES 0,(HL) ; CYCLES=12 MEM[0xC600]=0xFE
RES 1,(HL) ; CYCLES=12 MEM[0xC600]=0xFC
RES 2,(HL) ; CYCLES=12 MEM[0xC600]=0xF8
RES 3,(HL) ; CYCLES=12 MEM[0xC600]=0xF0
RES 4,(HL) ; CYCLES=12 MEM[0xC600]=0xE0
RES 5,(HL) ; CYCLES=12 MEM[0xC600]=0xC0
RES 6,(HL) ; CYCLES=12 MEM[0xC600]=0x80
RES 7,(HL) ; CYCLES=12 MEM[0xC600]=0x00

LD HL, 0x0000

SET 0,B ; CYCLES=8 B=0x01
SET 0,C ; CYCLES=8 C=0x01
SET 0,D ; CYCLES=8 D=0x01
SET 0,E ; CYCLES=8 E=0x01
SET 0,H ; CYCLES=8 H=0x01
SET 0,L ; CYCLES=8 L=0x01
SET 0,A ; CYCLES=8 A=0x01
SET 1,B ; CYCLES=8 B=0x03
SET 1,C ; CYCLES=8 C=0x03
SET 1,D ; CYCLES=8 D=0x03
SET 1,E ; CYCLES=8 E=0x03
SET 1,H ; CYCLES=8 H=0x03
SET 1,L ; CYCLES=8 L=0x03
SET 1,A ; CYCLES=8 A=0x03
SET 2,B ; CYCLES=8 B=0x07
SET 2,C ; CYCLES=8 C=0x07
SET 2,D ; CYCLES=8 D=0x07
SET 2,E ; CYCLES=8 E=0x07
SET 2,H ; CYCLES=8 H=0x07
SET 2,L ; CYCLES=8 L=0x07
SET 2,A ; CYCLES=8 A=0x07
SET 3,B ; CYCLES=8 B=0x0F
SET 3,C ; CYCLES=8 C=0x0F
SET 3,D ; CYCLES=8 D=0x0F
SET 3,E ; CYCLES=8 E=0x0F
SET 3,H ; CYCLES=8 H=0x0F
SET 3,L ; CYCLES=8 L=0x0F
SET 3,A ; CYCLES=8 A=0x0F
SET 4,B ; CYCLES=8 B=0x1F
SET 4,C ; CYCLES=8 C=0x1F
SET 4,D ; CYCLES=8 D=0x1F
SET 4,E ; CYCLES=8 E=0x1F
SET 4,H ; CYCLES=8 H=0x1F
SET 4,L ; CYCLES=8 L=0x1F
SET 4,A ; CYCLES=8 A=0x1F
SET 5,B ; CYCLES=8 B=0x3F
SET 5,C ; CYCLES=8 C=0x3F
SET 5,D ; CYCLES=8 D=0x3F
SET 5,E ; CYCLES=8 E=0x3F
SET 5,H ; CYCLES=8 H=0x3F
SET 5,L ; CYCLES=8 L=0x3F
SET 5,A ; CYCLES=8 A=0x3F
SET 6,B ; CYCLES=8 B=0x7F
SET 6,C ; CYCLES=8 C=0x7F
SET 6,D ; CYCLES=8 D=0x7F
SET 6,E ; CYCLES=8 E=0x7F
SET 6,H ; CYCLES=8 H=0x7F
SET 6,L ; CYCLES=8 L=0x7F
SET 6,A ; CYCLES=8 A=0x7F
SET 7,B ; CYCLES=8 B=0xFF
SET 7,C ; CYCLES=8 C=0xFF
SET 7,D ; CYCLES=8 D=0xFF
SET 7,E ; CYCLES=8 E=0xFF
SET 7,H ; CYCLES=8 H=0xFF
SET 7,L ; CYCLES=8 L=0xFF
SET 7,A ; CYCLES=8 A=0xFF

LD HL,0xC600
SET 0,(HL) ; CYCLES=12 MEM[0xC600]=0x01
SET 1,(HL) ; CYCLES=12 MEM[0xC600]=0x03
SET 2,(HL) ; CYCLES=12 MEM[0xC600]=0x07
SET 3,(HL) ; CYCLES=12 MEM[0xC600]=0x0F
SET 4,(HL) ; CYCLES=12 MEM[0xC600]=0x1F
SET 5,(HL) ; CYCLES=12 MEM[0xC600]=0x3F
SET 6,(HL) ; CYCLES=12 MEM[0xC600]=0x7F
SET 7,(HL) ; CYCLES=12 MEM[0xC600]=0xFF

BIT 0,B ; CYCLES=8 
BIT 0,C ; CYCLES=8
BIT 0,D ; CYCLES=8
BIT 0,E ; CYCLES=8
BIT 0,H ; CYCLES=8
BIT 0,L ; CYCLES=8
BIT 0,(HL) ; CYCLES=12
BIT 0,A ; CYCLES=8
BIT 1,B ; CYCLES=8
BIT 1,C ; CYCLES=8
BIT 1,D ; CYCLES=8
BIT 1,E ; CYCLES=8
BIT 1,H ; CYCLES=8
BIT 1,L ; CYCLES=8
BIT 1,(HL) ; CYCLES=12
BIT 1,A ; CYCLES=8
BIT 2,B ; CYCLES=8
BIT 2,C ; CYCLES=8
BIT 2,D ; CYCLES=8
BIT 2,E ; CYCLES=8
BIT 2,H ; CYCLES=8
BIT 2,L ; CYCLES=8
BIT 2,(HL) ; CYCLES=12
BIT 2,A ; CYCLES=8
BIT 3,B ; CYCLES=8
BIT 3,C ; CYCLES=8
BIT 3,D ; CYCLES=8
BIT 3,E ; CYCLES=8
BIT 3,H ; CYCLES=8
BIT 3,L ; CYCLES=8
BIT 3,(HL) ; CYCLES=12
BIT 3,A ; CYCLES=8
BIT 4,B ; CYCLES=8
BIT 4,C ; CYCLES=8
BIT 4,D ; CYCLES=8
BIT 4,E ; CYCLES=8
BIT 4,H ; CYCLES=8
BIT 4,L ; CYCLES=8
BIT 4,(HL) ; CYCLES=12
BIT 4,A ; CYCLES=8
BIT 5,B ; CYCLES=8
BIT 5,C ; CYCLES=8
BIT 5,D ; CYCLES=8
BIT 5,E ; CYCLES=8
BIT 5,H ; CYCLES=8
BIT 5,L ; CYCLES=8
BIT 5,(HL) ; CYCLES=12
BIT 5,A ; CYCLES=8
BIT 6,B ; CYCLES=8
BIT 6,C ; CYCLES=8
BIT 6,D ; CYCLES=8
BIT 6,E ; CYCLES=8
BIT 6,H ; CYCLES=8
BIT 6,L ; CYCLES=8
BIT 6,(HL) ; CYCLES=12
BIT 6,A ; CYCLES=8
BIT 7,B ; CYCLES=8
BIT 7,C ; CYCLES=8
BIT 7,D ; CYCLES=8
BIT 7,E ; CYCLES=8
BIT 7,H ; CYCLES=8
BIT 7,L ; CYCLES=8
BIT 7,(HL) ; CYCLES=12
BIT 7,A ; CYCLES=8

HALT ; CYCLES=4
STOP 0 ; CYCLES=4

FUNCTION_ONE:
LD D,0x05
RET

RET Z ; CYCLES=8
RET Z ; CYCLES=20
RET NZ ; CYCLES=8
RET NZ ; CYCLES=20
RET ; CYCLES=16
RET C ; CYCLES=8
RET C ; CYCLES=20
RETI ; CYCLES=16
RET NC ; CYCLES=8
RET NC ; CYCLES=20

TEST_Z:
LD A,0x00
RET Z ; CYCLES=8
LD A,0x80
RET ; CYCLES=16

TEST_Z_J:
LD A,0x00
RET Z ; CYCLES=20
LD A,0x80
RET ; CYCLES=16

TEST_C:
LD A,0x00
RET C ; CYCLES=8
LD A,0x80
RET ; CYCLES=16

TEST_C_J:
LD A,0x00
RET C ; CYCLES=20
LD A,0x80
RET ; CYCLES=16

TEST_NC:
LD A,0x00
RET NC ; CYCLES=8
LD A,0x80
RET ; CYCLES=16

TEST_NC_J:
LD A,0x00
RET NC ; CYCLES=20
LD A,0x80
RET ; CYCLES=16

TEST_NZ:
LD A,0x00
RET NZ ; CYCLES=8
LD A,0x80
RET ; CYCLES=16

TEST_NZ_J:
LD A,0x00
RET NZ ; CYCLES=20
LD A,0x80
RET ; CYCLES=16

TEST_RET:
LD A,0x00
RET ; CYCLES=16
LD A,0x80
RET ; CYCLES=16

TEST_RETI:
LD A,0x00
RETI ; CYCLES=16
LD A,0x80
RET ; CYCLES=16
