	SECTION	"RST00",HOME[$00]
RST_00:	
	jp	BRSTA

	SECTION	"RST08",HOME[$08]
RST_08:	
	jp	BRSTB

	SECTION	"RST10",HOME[$10]
RST_10:
	jp	BRSTC

	SECTION	"RST18",HOME[$18]
RST_18:
	jp	BRSTD

	SECTION	"RST20",HOME[$20]
RST_20:
	jp	BRSTE

	SECTION	"RST28",HOME[$28]
RST_28:
	jp	BRSTF

	SECTION	"RST30",HOME[$30]
RST_30:
	jp	BRSTG

	SECTION	"RST38",HOME[$38]
RST_38:
	jp	BRSTH

	SECTION	"VBlankIRQ",HOME[$40]
VBL_VECT:
	reti
	
	SECTION	"LCDIRQ",HOME[$48]
LCD_VECT:
	reti

	SECTION	"TimerIRQ",HOME[$50]
TIMER_VECT:
	reti

	SECTION	"SerialIRQ",HOME[$58]
SERIAL_VECT:
	reti

	SECTION	"JoypadIRQ",HOME[$60]
JOYPAD_VECT:
	reti

SECTION "START",HOME[0x100]
NOP
JP 0x200 
	;; $0104-$0133 (Nintendo logo - do _not_ modify the logo data here or the GB will not run the program)
	DB	$CE,$ED,$66,$66,$CC,$0D,$00,$0B,$03,$73,$00,$83,$00,$0C,$00,$0D
	DB	$00,$08,$11,$1F,$88,$89,$00,$0E,$DC,$CC,$6E,$E6,$DD,$DD,$D9,$99
	DB	$BB,$BB,$67,$63,$6E,$0E,$EC,$CC,$DD,$DC,$99,$9F,$BB,$B9,$33,$3E

	;; $0134-$013E (Game title - up to 11 upper case ASCII characters; pad with $00)
	DB	"TEST GBCPU"
	;; $013F-$0142 (Product code - 4 ASCII characters, assigned by Nintendo, just leave blank)
	DB	"    "
	;; $0143 (Color GameBoy compatibility code)
	DB	$00	;; $00 - DMG 
			;; $80 - DMG/GBC
			;; $C0 - GBC Only cartridge
	;; $0144 (High-nibble of license code - normally $00 if $014B != $33)
	DB	$00
	;; $0145 (Low-nibble of license code - normally $00 if $014B != $33)
	DB	$00
	;; $0146 (GameBoy/Super GameBoy indicator)
	DB	$00	;; $00 - GameBoy
	;; $0147 (Cartridge type - all Color GameBoy cartridges are at least $19)
	DB	$00	;; $00 - ROM Only
	;; $0148 (ROM size)
	DB	$00	;; $00 - 256Kbit = 32Kbyte = 2 banks
	;; $0149 (RAM size)
	DB	$00	;; $00 - None
	;; $014A (Destination code)
	DB	$00	;; $01 - All others
			;; $00 - Japan
	;; $014B (Licensee code - this _must_ be $33)
	DB	$33	;; $33 - Check $0144/$0145 for Licensee code.
	;; $014C (Mask ROM version - handled by RGBFIX)
	DB	$00
	;; $014D (Complement check)
	DB	$00
	;; $014E-$014F (Cartridge checksum)
	DB	$00,$00

SECTION "TEST",HOME[0x200]
NOP ; CYCLES=4
LD BC,0x100 ; BC=0xC500 CYCLES=12
LD A,0xFF ; A=0xFF CYCLES=8
LD (BC),A ; MEM[0xC500]=0xFF CYCLES=8
INC BC ; BC=0xC501 CYCLES=8
INC B ; B=0xC6 BC=0xC601 CYCLES=4
DEC B ; B=0xC5 BC=0xC501 CYCLES=4
LD B,0xC1 ; B=0xC1 BC=0xC101 CYCLES=8
RLCA ; A=0xFE F=0x10 CYCLES=4
LD HL,0xC5C5 ; H=0xC5 L=0xC5 HL=0xC5 CYCLES=12
LD SP,HL ; SP=0xC5C5 CYCLES=8
LD (0xC500),SP ; MEM[0xC500]=0xC5C5 CYCLES=20
LD HL,SP+0x02 ; HL=0xC5C7 SP=0xC5C5 CYCLES=12
ADD HL,BC ; HL=0x86C8 BC=0xC101 F=0x10 CYCLES=8
LD (HL),0x02 ; HL=0x86C8 MEM[0x86C8]=0x02 CYCLES=12 
LD A,(HL+) ; HL=0x86C9 A=0x02 MEM[0x86C8]=0x02 CYCLES=8
LD A,(BC) ; A=0x0 BC=0xC101 CYCLES=8
DEC BC ; BC=0xC100 CYCLES=8
INC C ; C=0x01 BC=0xC101 CYCLES=4
DEC C ; C=0x00 BC=0xC100 CYCLES=4
LD C,0xEE ; C=0xEE BC=0xC1EE CYCLES=8
INC A ; A=0x01 CYCLES=4
RRCA ; A=0x00 F=0x10 CYCLES=4
LD DE,0xC400 ; DE=0xC400 CYCLES=12
LD (DE),A ; MEM[0xC400]=0x0 CYCLES=8
INC DE ; DC=0xC401 CYCLES=8
INC D ; D=0x02 CYCLES=4
DEC D ; D=0x01 CYCLES=4
LD D,0x16 ; D=0x16 CYCLES=8
RLA ; A=0x0 F=0x80 CYCLES=4
LD E,0xCC ; E=0xCC D=0x16 DE=0x16EE CYCLES=8
ADD HL,DE ; HL=0x9DB7 F=0x20 CYCLES=8
LD DE,0xC400 ; DE=0xC400 CYCLES=12
DEC A ; A=0xFF F=0x50 CYCLES=4
LD A,(DE) ; A=0x0 CYCLES=8
DEC DE ; DE=0xC3FF CYCLES=8
INC E ; DE=0xC300 E=0x00 D=0xC3 CYCLES=4
DEC E ; DE=0xC3FF E=0xFF D=0xC3 CYCLES=4
LD HL, 0xE300 ; HL=0xE300 CYCLES=12
ADD HL,HL ; HL=0xC600 CYCLES=8
LD A,0x20 ; A=0x20 CYCLES=8
LD (HL+),A ; MEM[0xC600]=0x20 HL=0xC601 CYCLES=8
INC HL ; HL=0xC602 CYCLES=8
INC H ; H=0xC7 HL=0xC702 CYCLES=4
DEC H ; H=0xC6 HL=0xC602 CYCLES=4
LD H,0xC3 ; H=0xC3 HL=0xC302 CYCLES=8
LD L,0x00 ; L=0x00 HL=0xC300 CYCLES=8
DEC HL ; H=0xC2 HL=0xC2FF L=0xFF CYCLES=8
INC L ; H=0xC2 HL=0xC200 L=0x00 F=0x10 CYCLES=4
DEC L ; H=0xC2 HL=0xC2FF L=0xFF F=0x40 CYCLES=4
CPL ; A=0xDF F=0x60 CYCLES=4
RRA ; A=0x6F F=0x10 CYCLES=4

LD SP,0xFF00 ; SP=0xFF00 CYCLES=12
ADD SP,0x03 ; SP=0xFF03 CYCLES=16
LD (HL-),A ; HL=0xC2FE MEM[0xC2FF]=0x6F A=0x6F CYCLES=8
INC SP ; SP=0xFF04 CYCLES=8
INC (HL) ; MEM[0xC2FE]=0x01 HL=0xC2FE CYCLES=12
DEC (HL) ; MEM[0xC2FE]=0x00 HL=0xC2FE CYCLES=12
ADD HL,SP ; HL=0xC202 SP=0xFF04 CYCLES=8
DEC SP ; SP=0xFF03 CYCLES=8

PUSH BC ; SP=0xFF01 MEM[0xFF03]=0xC1 MEM[0xFF02]=0x00 CYCLES=16
PUSH DE ; SP=0xFEFE MEM[0xFF01]=0xC3 MEM[0xFEFF]=0xFF CYCLES=16
PUSH HL ; SP=0xFEFC MEM[0xFEFE]=0xC2 MEM[0xFEFD]=0x02 CYCLES=16
PUSH AF ; SP=0xFEFA MEM[0xFEFC]=0x6F MEM[0xFEFB]=0x10 CYCLES=16
POP BC ; SP=0xFEFC BC=0x6F10 CYCLES=12
POP AF ; SP=0xFEFE AF=0xC202 CYCLES=12
POP HL ; SP=0xFF01 HL=0xC3FF CYCLES=12
POP DE ; SP=0xFF03 DE=0xC100 CYCLES=12

SUB 0xC0 ; A=0x02 F=0x00 CYCLES=8
SBC A,0x1 ; A=0x01 CYCLES=8
LDH (0x0F),A ; A=0x01 MEM[0xFF0F]=0x01 CYCLES=12

SCF ; F=0x10 CYCLES=4
CCF ; F=0x00 CYCLES=4

LD A,(HL-) ; CYCLES=8 A=0x20 MEM[0xC600]=0x00 HL=0xC5FF
LD (HL),0x02 ; HL=0xC5FF MEM[0xC5FF]=0x02 CYCLES=12

LD B,(HL) ; CYCLES=8 B=0x02 MEM[0xC5FF]=0x02 HL=0xC5FF
LD C,(HL) ; CYCLES=8 C=0x02 MEM[0xC5FF]=0x02 HL=0xC5FF
LD D,(HL) ; CYCLES=8 D=0x02 MEM[0xC5FF]=0x02 HL=0xC5FF
LD E,(HL) ; CYCLES=8 E=0x02 MEM[0xC5FF]=0x02 HL=0xC5FF
LD H,(HL) ; CYCLES=8 H=0x02 MEM[0xC5FF]=0x02 HL=0xC5FF
LD L,(HL) ; CYCLES=8 L=0x02 MEM[0xC5FF]=0x02 HL=0xC5FF
LD (HL),B ; CYCLES=8 B=0x02 MEM[0xC5FF]=0x02 HL=0xC5FF
LD (HL),C ; CYCLES=8 B=0x00 MEM[0xC5FF]=0x02 HL=0xC5FF
LD (HL),D ; CYCLES=8 B=0x00 MEM[0xC5FF]=0x02 HL=0xC5FF
LD (HL),E ; CYCLES=8 B=0x00 MEM[0xC5FF]=0x02 HL=0xC5FF
LD (HL),H ; CYCLES=8 B=0x00 MEM[0xC5FF]=0x02 HL=0xC5FF
LD (HL),L ; CYCLES=8 B=0x00 MEM[0xC5FF]=0x02 HL=0xC5FF
LD (HL),A ; CYCLES=8 B=0x00 MEM[0xC5FF]=0x02 HL=0xC5FF
LD A,(HL) ; CYCLES=8 B=0x00 MEM[0xC5FF]=0x02 HL=0xC5FF

LD A,5 ; A=0x05 CYCLES=4
LD B,0x6 ; B=0x06 CYCLES=4
LD C,0x80 ; C=0x80 CYCLES=4
LD E,12 ; E=0x0C CYCLES=4
LD D,0xFF ; D=0xFF CYCLES=4
LD H,0xC6 ; H=0xC6 CYCLES=4
LD L,0x00 ; L=0x00 CYCLES=4

LD B,B ; CYCLES=4 B=0x06
LD B,C ; CYCLES=4 B=0x80
LD B,D ; CYCLES=4 B=0xFF
LD B,E ; CYCLES=4 B=0x0C
LD B,H ; CYCLES=4 B=0xC6
LD B,L ; CYCLES=4 B=0x00
LD B,A ; CYCLES=4 B=0x05
LD B,0x06

LD C,B ; CYCLES=4 C=0x06
LD C,C ; CYCLES=4 C=0x06
LD C,D ; CYCLES=4 C=0xFF
LD C,E ; CYCLES=4 C=0x0C
LD C,H ; CYCLES=4 C=0xC6
LD C,L ; CYCLES=4 C=0x00
LD C,A ; CYCLES=4 C=0x05
LD C,0x80

LD D,B ; CYCLES=4 D=0x06
LD D,C ; CYCLES=4 D=0x80
LD D,D ; CYCLES=4 D=0x80
LD D,E ; CYCLES=4 D=0x0C
LD D,H ; CYCLES=4 D=0xC6
LD D,L ; CYCLES=4 D=0x00
LD D,A ; CYCLES=4 D=0x05
LD D,0xFF

LD E,B ; CYCLES=4 E=0x06
LD E,C ; CYCLES=4 E=0x80
LD E,D ; CYCLES=4 E=0xFF
LD E,E ; CYCLES=4 E=0xFF
LD E,H ; CYCLES=4 E=0xC6
LD E,L ; CYCLES=4 E=0x00
LD E,A ; CYCLES=4 E=0x05
LD E,12

LD H,B ; CYCLES=4 H=0x06
LD H,C ; CYCLES=4 H=0x80
LD H,D ; CYCLES=4 H=0xFF
LD H,E ; CYCLES=4 H=0x0C
LD H,H ; CYCLES=4 H=0x0C
LD H,L ; CYCLES=4 H=0x00
LD H,A ; CYCLES=4 H=0x05
LD H,0xC6

LD L,B ; CYCLES=4 L=0x06
LD L,C ; CYCLES=4 L=0x80
LD L,D ; CYCLES=4 L=0xFF
LD L,E ; CYCLES=4 L=0x0C
LD L,H ; CYCLES=4 L=0xC6
LD L,L ; CYCLES=4 L=0xC6
LD L,A ; CYCLES=4 L=0x05
LD L,0x00 ; CYCLES=8 L=0x00

LD A,B ; CYCLES=4 A=0x06
LD A,C ; CYCLES=4 A=0x80
LD A,D ; CYCLES=4 A=0xFF
LD A,E ; CYCLES=4 A=0x0C
LD A,H ; CYCLES=4 A=0xC6
LD A,L ; CYCLES=4 A=0x00
LD A,A ; CYCLES=4 A=0x00
LD A,0x05 ; CYCLES=8 A=0x05

ADD A,B ; CYCLES=4 A=0x0B B=0x06 F=0x00
ADD A,C ; CYCLES=4 A=0x8B C=0x80 F=0x00
ADD A,D ; CYCLES=4 A=0x8A D=0xFF F=0x10
ADD A,E ; CYCLES=4 A=0x96 E=0x0C F=0x00
ADD A,H ; CYCLES=4 A=0x5C H=0xC6 F=0x10
ADD A,L ; CYCLES=4 A=0x5C L=0x00 F=0x00
ADD A,(HL) ; CYCLES=8 A=0x5E MEM[0xC600]=0x02 F=0x00
ADD A,A ; CYCLES=4 A=0xBC F=0x00
LD A,0x05 ; CYCLES=4 A=0x05
ADC A,B ; CYCLES=4 A=0x0B B=0x06 F=0x00
ADC A,C ; CYCLES=4 A=0x8B C=0x80 F=0x00
ADC A,D ; CYCLES=4 A=0x8B D=0xFF F=0x10 
ADC A,E ; CYCLES=4 A=0x96 E=0x0C F=0x00
ADC A,H ; CYCLES=4 A=0x5C H=0xC6 F=0x10
ADC A,L ; CYCLES=4 A=0x5C L=0x00 F=0x00
ADC A,(HL) ; CYCLES=8 A=0x5E MEM[0xC600]=0x02 F=0x00
ADC A,A ; CYCLES=4 A=0xBC F=0x00
LD A, 0x10 ; CYCLES=8 A=0x10
LD B, 0x04 ; CYCLES=8 B=0x04
SUB B ; A=0x0C B=0x04 F=0x30 CYCLES=4
LD C,1 ; CYCLES=8 C=0x01
SUB C ; CYCLES=4 A=0x0B C=0x01
LD D,2 ; CYCLES=8 D=0x02
SUB D ; CYCLES=4 A=0x09 D=0x02
LD E,3 ; CYCLES=8 E=0x03
SUB E ; CYCLES=4 A=0x06 E=0x03
LD H,0x02 ; CYCLES=8 H=0x02
SUB H ; CYCLES=4 A=0x04 H=0x02
SUB L ; CYCLES=4 A=0x04 L=0x00
LD HL, 0xC600 ; CYCLES=12 HL=0xC600
LD (HL),0x05 ; CYCLES=12 MEM[0xC600]=0x05 HL=0xC600
LD A,0x06 ; CYCLES=8 A=0x06
SUB (HL) ; CYCLES=8 A=0x01 MEM[0xC600]=0x05 HL=0x0C600
SUB A ; CYCLES=4 A=0x00 F=0x80

LD A,0x10 ; CYCLES=8 A=0x10 

SBC A,B ; CYCLES=4 
SBC A,C ; CYCLES=4
SBC A,D ; CYCLES=4
SBC A,E ; CYCLES=4
SBC A,H ; CYCLES=4
SBC A,L ; CYCLES=4
SBC A,(HL) ; CYCLES=4
SBC A,A ; CYCLES=4

AND B ;
AND C ;
AND D ;
AND E ;
AND H ;
AND L ;
AND (HL) ;
AND A ;
XOR B ;
XOR C ;
XOR D ;
XOR E ;
XOR H ;
XOR L ;
XOR (HL) ;
XOR A ;
OR B ;
OR C ;
OR D ;
OR E ;
OR H ;
OR L ;
OR (HL) ;
OR A ;
CP B ;
CP C ;
CP D ;
CP E ;
CP H ;
CP L ;
CP (HL) ;
CP A ;

ADD A,d8 ;
ADC A,d8 ;

AND d8 ;
CP d8 ;
XOR d8 ;
LDH A,(a8) ;
LD A,(a16) ;
LD A,(C) ;
LD (a16),A ;
LD (C),A ;
OR d8 ;


RST 00H ;
BRSTA:
RST 08H ;
BRSTB:
RST 10H ;
BRSTC:
RST 18H ;
BRSTD:
RST 20H ;
BRSTE:
RST 28H ;
BRSTF:
RST 30H ;
BRSTG:
RST 38H ;
BRSTH:

JR r8
JR NZ,r8
JR Z,r8
JP NZ,a16
JP a16
CALL NZ,a16
JP Z,a16
JP NC,a16
JP C,a16
CALL C,a16
JR C,r8
CALL NC,a16
DAA
CALL Z,a16
CALL a16
JP (HL)

RET Z
RET NZ
RET
RET C
RETI
RET NC


DI

EI



RLC B
RLC C
RLC D
RLC E
RLC H
RLC L
RLC (HL)
RLC A
RRC B
RRC C
RRC D
RRC E
RRC H
RRC L
RRC (HL)
RRC A
RL B
RL C
RL D
RL E
RL H
RL L
RL (HL)
RL A
RR B
RR C
RR D
RR E
RR H
RR L
RR (HL)
RR A
SLA B
SLA C
SLA D
SLA E
SLA H
SLA L
SLA (HL)
SLA A
SRA B
SRA C
SRA D
SRA E
SRA H
SRA L
SRA (HL)
SRA A
SWAP B
SWAP C
SWAP D
SWAP E
SWAP H
SWAP L
SWAP (HL)
SWAP A
SRL B
SRL C
SRL D
SRL E
SRL H
SRL L
SRL (HL)
SRL A
BIT 0,B
BIT 0,C
BIT 0,D
BIT 0,E
BIT 0,H
BIT 0,L
BIT 0,(HL)
BIT 0,A
BIT 1,B
BIT 1,C
BIT 1,D
BIT 1,E
BIT 1,H
BIT 1,L
BIT 1,(HL)
BIT 1,A
BIT 2,B
BIT 2,C
BIT 2,D
BIT 2,E
BIT 2,H
BIT 2,L
BIT 2,(HL)
BIT 2,A
BIT 3,B
BIT 3,C
BIT 3,D
BIT 3,E
BIT 3,H
BIT 3,L
BIT 3,(HL)
BIT 3,A
BIT 4,B
BIT 4,C
BIT 4,D
BIT 4,E
BIT 4,H
BIT 4,L
BIT 4,(HL)
BIT 4,A
BIT 5,B
BIT 5,C
BIT 5,D
BIT 5,E
BIT 5,H
BIT 5,L
BIT 5,(HL)
BIT 5,A
BIT 6,B
BIT 6,C
BIT 6,D
BIT 6,E
BIT 6,H
BIT 6,L
BIT 6,(HL)
BIT 6,A
BIT 7,B
BIT 7,C
BIT 7,D
BIT 7,E
BIT 7,H
BIT 7,L
BIT 7,(HL)
BIT 7,A
RES 0,B
RES 0,C
RES 0,D
RES 0,E
RES 0,H
RES 0,L
RES 0,(HL)
RES 0,A
RES 1,B
RES 1,C
RES 1,D
RES 1,E
RES 1,H
RES 1,L
RES 1,(HL)
RES 1,A
RES 2,B
RES 2,C
RES 2,D
RES 2,E
RES 2,H
RES 2,L
RES 2,(HL)
RES 2,A
RES 3,B
RES 3,C
RES 3,D
RES 3,E
RES 3,H
RES 3,L
RES 3,(HL)
RES 3,A
RES 4,B
RES 4,C
RES 4,D
RES 4,E
RES 4,H
RES 4,L
RES 4,(HL)
RES 4,A
RES 5,B
RES 5,C
RES 5,D
RES 5,E
RES 5,H
RES 5,L
RES 5,(HL)
RES 5,A
RES 6,B
RES 6,C
RES 6,D
RES 6,E
RES 6,H
RES 6,L
RES 6,(HL)
RES 6,A
RES 7,B
RES 7,C
RES 7,D
RES 7,E
RES 7,H
RES 7,L
RES 7,(HL)
RES 7,A
SET 0,B
SET 0,C
SET 0,D
SET 0,E
SET 0,H
SET 0,L
SET 0,(HL)
SET 0,A
SET 1,B
SET 1,C
SET 1,D
SET 1,E
SET 1,H
SET 1,L
SET 1,(HL)
SET 1,A
SET 2,B
SET 2,C
SET 2,D
SET 2,E
SET 2,H
SET 2,L
SET 2,(HL)
SET 2,A
SET 3,B
SET 3,C
SET 3,D
SET 3,E
SET 3,H
SET 3,L
SET 3,(HL)
SET 3,A
SET 4,B
SET 4,C
SET 4,D
SET 4,E
SET 4,H
SET 4,L
SET 4,(HL)
SET 4,A
SET 5,B
SET 5,C
SET 5,D
SET 5,E
SET 5,H
SET 5,L
SET 5,(HL)
SET 5,A
SET 6,B
SET 6,C
SET 6,D
SET 6,E
SET 6,H
SET 6,L
SET 6,(HL)
SET 6,A
SET 7,B
SET 7,C
SET 7,D
SET 7,E
SET 7,H
SET 7,L
SET 7,(HL)
SET 7,A

HALT
STOP 0 ; CYCLES=192
