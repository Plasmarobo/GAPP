	SECTION	"RST00",HOME[$00]
RST_00:	
	LD L,0x00
	jp	BRSTA

	SECTION	"RST08",HOME[$08]
RST_08:	
	LD L,0x08
	jp	BRSTB

	SECTION	"RST10",HOME[$10]
RST_10:
	LD L,0x10
	jp	BRSTC

	SECTION	"RST18",HOME[$18]
RST_18:
	LD L,0x18
	jp	BRSTD

	SECTION	"RST20",HOME[$20]
RST_20:
	LD L,0x20
	jp	BRSTE

	SECTION	"RST28",HOME[$28]
RST_28:
	LD L,0x28
	jp	BRSTF

	SECTION	"RST30",HOME[$30]
RST_30:
	LD L,0x30
	jp	BRSTG

	SECTION	"RST38",HOME[$38]
RST_38:
	LD L,0x38
	jp	BRSTH

	SECTION	"VBlankIRQ",HOME[$40]
VBL_VECT:
	LD L,0x40
	reti
	
	SECTION	"LCDIRQ",HOME[$48]
LCD_VECT:
	LD L,0x48
	reti

	SECTION	"TimerIRQ",HOME[$50]
TIMER_VECT:
	LD L,0x50
	reti

	SECTION	"SerialIRQ",HOME[$58]
SERIAL_VECT:
	LD L,0x58
	reti

	SECTION	"JoypadIRQ",HOME[$60]
JOYPAD_VECT:
	LD L,0x60
	reti

SECTION "START",HOME[0x100]
NOP
JP 0x200 
	;; $0104-$0133 (Nintendo logo - do _not_ modify the logo data here or the GB will not run the program)
	DB	$CE,$ED,$66,$66,$CC,$0D,$00,$0B,$03,$73,$00,$83,$00,$0C,$00,$0D
	DB	$00,$08,$11,$1F,$88,$89,$00,$0E,$DC,$CC,$6E,$E6,$DD,$DD,$D9,$99
	DB	$BB,$BB,$67,$63,$6E,$0E,$EC,$CC,$DD,$DC,$99,$9F,$BB,$B9,$33,$3E

	;; $0134-$013E (Game title - up to 11 upper case ASCII characters; pad with $00)
	DB	"TEST GBCPU"
	;; $013F-$0142 (Product code - 4 ASCII characters, assigned by Nintendo, just leave blank)
	DB	"    "
	;; $0143 (Color GameBoy compatibility code)
	DB	$00	;; $00 - DMG 
			;; $80 - DMG/GBC
			;; $C0 - GBC Only cartridge
	;; $0144 (High-nibble of license code - normally $00 if $014B != $33)
	DB	$00
	;; $0145 (Low-nibble of license code - normally $00 if $014B != $33)
	DB	$00
	;; $0146 (GameBoy/Super GameBoy indicator)
	DB	$00	;; $00 - GameBoy
	;; $0147 (Cartridge type - all Color GameBoy cartridges are at least $19)
	DB	$00	;; $00 - ROM Only
	;; $0148 (ROM size)
	DB	$00	;; $00 - 256Kbit = 32Kbyte = 2 banks
	;; $0149 (RAM size)
	DB	$00	;; $00 - None
	;; $014A (Destination code)
	DB	$00	;; $01 - All others
			;; $00 - Japan
	;; $014B (Licensee code - this _must_ be $33)
	DB	$33	;; $33 - Check $0144/$0145 for Licensee code.
	;; $014C (Mask ROM version - handled by RGBFIX)
	DB	$00
	;; $014D (Complement check)
	DB	$00
	;; $014E-$014F (Cartridge checksum)
	DB	$00,$00

SECTION "TEST",HOME[0x200]
NOP ;EXPECT: CYCLES=4
LD BC,0xC500 ;EXPECT: BC=0xC500 CYCLES=12
LD A,0xFF ;EXPECT: A=0xFF CYCLES=8
LD (BC),A ;EXPECT: MEM[0xC500]=0xFF CYCLES=8
INC BC ;EXPECT: BC=0xC501 CYCLES=8
INC B ;EXPECT: B=0xC6 BC=0xC601 CYCLES=4
DEC B ;EXPECT: B=0xC5 BC=0xC501 CYCLES=4
LD B,0xC1 ;EXPECT: B=0xC1 BC=0xC101 CYCLES=8
RLCA ;EXPECT: A=0xFF F=0x10 CYCLES=4
LD HL,0xC5C5 ;EXPECT: H=0xC5 L=0xC5 HL=0xC5C5 CYCLES=12
LD SP,HL ;EXPECT: SP=0xC5C5 CYCLES=8
LD (0xC500),SP ;EXPECT: MEM[0xC500]=0xC5 MEM[0xC501]=0xC5 CYCLES=20
LD HL,SP+0x02 ;EXPECT: HL=0xC5C7 SP=0xC5C5 CYCLES=12
ADD HL,BC ;EXPECT: HL=0x86C8 BC=0xC101 F=0x10 CYCLES=8
LD (HL),0x02 ;EXPECT: HL=0x86C8 MEM[0x86C8]=0x02 CYCLES=12 
LD A,(HL+) ;EXPECT: HL=0x86C9 A=0x02 MEM[0x86C8]=0x02 CYCLES=8
LD BC,0xC500
LD (BC),A
LD A,0x00
LD A,(BC) ;EXPECT: A=0x02 BC=0xC500 CYCLES=8
LD BC,0xC101
DEC BC ;EXPECT: BC=0xC100 CYCLES=8
INC C ;EXPECT: C=0x01 BC=0xC101 CYCLES=4
DEC C ;EXPECT: C=0x00 BC=0xC100 CYCLES=4
LD C,0xEE ;EXPECT: C=0xEE BC=0xC1EE CYCLES=8
LD A,0x00
INC A ;EXPECT: A=0x01 CYCLES=4
RRCA ;EXPECT: A=0x80 F=0x10 CYCLES=4
LD DE,0xC400 ;EXPECT: DE=0xC400 CYCLES=12
LD (DE),A ;EXPECT: MEM[0xC400]=0x80 CYCLES=8
INC DE ;EXPECT: DE=0xC401 CYCLES=8
LD D,0x01
INC D ;EXPECT: D=0x02 CYCLES=4
DEC D ;EXPECT: D=0x01 CYCLES=4
LD D,0x16 ;EXPECT: D=0x16 CYCLES=8
SCF
CCF
RLA ;EXPECT: A=0x0 F=0x10 CYCLES=4
LD E,0xCC ;EXPECT: E=0xCC CYCLES=8
ADD HL,DE ;EXPECT: HL=0x9D95 DE=0x16CC F=0x30 CYCLES=8
LD DE,0xC400 ;EXPECT: DE=0xC400 CYCLES=12
LD A,0x00
SCF
CCF
DEC A ;EXPECT: A=0xFF F=0x40 CYCLES=4
LD A,(DE) ;EXPECT: A=0x80 CYCLES=8
DEC DE ;EXPECT: DE=0xC3FF CYCLES=8
INC E ;EXPECT: DE=0xC300 E=0x00 D=0xC3 CYCLES=4
DEC E ;EXPECT: DE=0xC3FF E=0xFF D=0xC3 CYCLES=4
LD HL, 0xE300 ;EXPECT: HL=0xE300 CYCLES=12
ADD HL,HL ;EXPECT: HL=0xC600 CYCLES=8
LD A,0x20 ;EXPECT: A=0x20 CYCLES=8
LD (HL+),A ;EXPECT: MEM[0xC600]=0x20 HL=0xC601 CYCLES=8
INC HL ;EXPECT: HL=0xC602 CYCLES=8
INC H ;EXPECT: H=0xC7 HL=0xC702 CYCLES=4
DEC H ;EXPECT: H=0xC6 HL=0xC602 CYCLES=4
LD H,0xC3 ;EXPECT: H=0xC3 HL=0xC302 CYCLES=8
LD L,0x00 ;EXPECT: L=0x00 HL=0xC300 CYCLES=8
DEC HL ;EXPECT: H=0xC2 HL=0xC2FF L=0xFF CYCLES=8
SCF
CCF
INC L ;EXPECT: H=0xC2 HL=0xC200 L=0x00 F=0xA0 CYCLES=4
DEC L ;EXPECT: H=0xC2 HL=0xC2FF L=0xFF F=0x40 CYCLES=4
CPL ;EXPECT: A=0xDF F=0x60 CYCLES=4
RRA ;EXPECT: A=0x6F F=0x10 CYCLES=4

LD SP,0xFF00 ;EXPECT: SP=0xFF00 CYCLES=12
ADD SP,0x03 ;EXPECT: SP=0xFF03 CYCLES=16
LD (HL-),A ;EXPECT: HL=0xC2FE MEM[0xC2FF]=0x6F CYCLES=8
INC SP ;EXPECT: SP=0xFF04 CYCLES=8
LD (HL),0x00
INC (HL) ;EXPECT: MEM[0xC2FE]=0x01 HL=0xC2FE CYCLES=12
DEC (HL) ;EXPECT: MEM[0xC2FE]=0x00 HL=0xC2FE CYCLES=12
ADD HL,SP ;EXPECT: HL=0xC202 SP=0xFF04 CYCLES=8 F=0x30
DEC SP ;EXPECT: SP=0xFF03 CYCLES=8 F=0x30

PUSH BC ;EXPECT: SP=0xFF01 MEM[0xFF02]=0xC1 MEM[0xFF01]=0xEE CYCLES=16 F=0x30
PUSH DE ;EXPECT: SP=0xFEFF MEM[0xFF00]=0xC3 MEM[0xFEFF]=0xFF CYCLES=16 F=0x30
PUSH HL ;EXPECT: SP=0xFEFD MEM[0xFEFE]=0xC2 MEM[0xFEFD]=0x02 CYCLES=16 F=0x30
PUSH AF ;EXPECT: SP=0xFEFB MEM[0xFEFC]=0x6F MEM[0xFEFB]=0x30 CYCLES=16 F=0x30
POP BC ;EXPECT: SP=0xFEFD BC=0x6F30 CYCLES=12 F=0x30
CCF
POP AF ;EXPECT: SP=0xFEFF AF=0xC202 CYCLES=12 F=0x02
POP HL ;EXPECT: SP=0xFF01 HL=0x00FF CYCLES=12 F=0x02
POP DE ;EXPECT: SP=0xFF03 DE=0xC1EE CYCLES=12 F=0x02

SUB 0xC0 ;EXPECT: A=0x02 F=0x00 CYCLES=8
SBC A,0x1 ;EXPECT: A=0x01 CYCLES=8
LDH (0x0F),A ;EXPECT: A=0x01 MEM[0xFF0F]=0x01 CYCLES=12

SCF ;EXPECT: F=0x10 CYCLES=4
CCF ;EXPECT: F=0x00 CYCLES=4

LD A,(HL-) ;EXPECT: CYCLES=8 A=0x20 MEM[0xC600]=0x00 HL=0xC5FF
LD (HL),0x02 ;EXPECT: HL=0xC5FF MEM[0xC5FF]=0x02 CYCLES=12

LD B,(HL) ;EXPECT: CYCLES=8 B=0x02 MEM[0xC5FF]=0x02 HL=0xC5FF
LD C,(HL) ;EXPECT: CYCLES=8 C=0x02 MEM[0xC5FF]=0x02 HL=0xC5FF
LD D,(HL) ;EXPECT: CYCLES=8 D=0x02 MEM[0xC5FF]=0x02 HL=0xC5FF
LD E,(HL) ;EXPECT: CYCLES=8 E=0x02 MEM[0xC5FF]=0x02 HL=0xC5FF
LD H,(HL) ;EXPECT: CYCLES=8 H=0x02 MEM[0xC5FF]=0x02 HL=0xC5FF
LD L,(HL) ;EXPECT: CYCLES=8 L=0x02 MEM[0xC5FF]=0x02 HL=0xC5FF
LD (HL),B ;EXPECT: CYCLES=8 B=0x02 MEM[0xC5FF]=0x02 HL=0xC5FF
LD (HL),C ;EXPECT: CYCLES=8 B=0x00 MEM[0xC5FF]=0x02 HL=0xC5FF
LD (HL),D ;EXPECT: CYCLES=8 B=0x00 MEM[0xC5FF]=0x02 HL=0xC5FF
LD (HL),E ;EXPECT: CYCLES=8 B=0x00 MEM[0xC5FF]=0x02 HL=0xC5FF
LD (HL),H ;EXPECT: CYCLES=8 B=0x00 MEM[0xC5FF]=0x02 HL=0xC5FF
LD (HL),L ;EXPECT: CYCLES=8 B=0x00 MEM[0xC5FF]=0x02 HL=0xC5FF
LD (HL),A ;EXPECT: CYCLES=8 B=0x00 MEM[0xC5FF]=0x02 HL=0xC5FF
LD A,(HL) ;EXPECT: CYCLES=8 B=0x00 MEM[0xC5FF]=0x02 HL=0xC5FF

LD A,5 ;EXPECT: A=0x05 CYCLES=4
LD B,0x6 ;EXPECT: B=0x06 CYCLES=4
LD C,0x80 ;EXPECT: C=0x80 CYCLES=4
LD E,12 ;EXPECT: E=0x0C CYCLES=4
LD D,0xFF ;EXPECT: D=0xFF CYCLES=4
LD H,0xC6 ;EXPECT: H=0xC6 CYCLES=4
LD L,0x00 ;EXPECT: L=0x00 CYCLES=4

LD B,B ;EXPECT: CYCLES=4 B=0x06
LD B,C ;EXPECT: CYCLES=4 B=0x80
LD B,D ;EXPECT: CYCLES=4 B=0xFF
LD B,E ;EXPECT: CYCLES=4 B=0x0C
LD B,H ;EXPECT: CYCLES=4 B=0xC6
LD B,L ;EXPECT: CYCLES=4 B=0x00
LD B,A ;EXPECT: CYCLES=4 B=0x05
LD B,0x06

LD C,B ;EXPECT: CYCLES=4 C=0x06
LD C,C ;EXPECT: CYCLES=4 C=0x06
LD C,D ;EXPECT: CYCLES=4 C=0xFF
LD C,E ;EXPECT: CYCLES=4 C=0x0C
LD C,H ;EXPECT: CYCLES=4 C=0xC6
LD C,L ;EXPECT: CYCLES=4 C=0x00
LD C,A ;EXPECT: CYCLES=4 C=0x05
LD C,0x80

LD D,B ;EXPECT: CYCLES=4 D=0x06
LD D,C ;EXPECT: CYCLES=4 D=0x80
LD D,D ;EXPECT: CYCLES=4 D=0x80
LD D,E ;EXPECT: CYCLES=4 D=0x0C
LD D,H ;EXPECT: CYCLES=4 D=0xC6
LD D,L ;EXPECT: CYCLES=4 D=0x00
LD D,A ;EXPECT: CYCLES=4 D=0x05
LD D,0xFF

LD E,B ;EXPECT: CYCLES=4 E=0x06
LD E,C ;EXPECT: CYCLES=4 E=0x80
LD E,D ;EXPECT: CYCLES=4 E=0xFF
LD E,E ;EXPECT: CYCLES=4 E=0xFF
LD E,H ;EXPECT: CYCLES=4 E=0xC6
LD E,L ;EXPECT: CYCLES=4 E=0x00
LD E,A ;EXPECT: CYCLES=4 E=0x05
LD E,12

LD H,B ;EXPECT: CYCLES=4 H=0x06
LD H,C ;EXPECT: CYCLES=4 H=0x80
LD H,D ;EXPECT: CYCLES=4 H=0xFF
LD H,E ;EXPECT: CYCLES=4 H=0x0C
LD H,H ;EXPECT: CYCLES=4 H=0x0C
LD H,L ;EXPECT: CYCLES=4 H=0x00
LD H,A ;EXPECT: CYCLES=4 H=0x05
LD H,0xC6

LD L,B ;EXPECT: CYCLES=4 L=0x06
LD L,C ;EXPECT: CYCLES=4 L=0x80
LD L,D ;EXPECT: CYCLES=4 L=0xFF
LD L,E ;EXPECT: CYCLES=4 L=0x0C
LD L,H ;EXPECT: CYCLES=4 L=0xC6
LD L,L ;EXPECT: CYCLES=4 L=0xC6
LD L,A ;EXPECT: CYCLES=4 L=0x05
LD L,0x00 ;EXPECT: CYCLES=8 L=0x00

LD A,B ;EXPECT: CYCLES=4 A=0x06
LD A,C ;EXPECT: CYCLES=4 A=0x80
LD A,D ;EXPECT: CYCLES=4 A=0xFF
LD A,E ;EXPECT: CYCLES=4 A=0x0C
LD A,H ;EXPECT: CYCLES=4 A=0xC6
LD A,L ;EXPECT: CYCLES=4 A=0x00
LD A,A ;EXPECT: CYCLES=4 A=0x00
LD A,0x05 ;EXPECT: CYCLES=8 A=0x05

ADD A,B ;EXPECT: CYCLES=4 A=0x0B B=0x06 F=0x00
ADD A,C ;EXPECT: CYCLES=4 A=0x8B C=0x80 F=0x00
ADD A,D ;EXPECT: CYCLES=4 A=0x8A D=0xFF F=0x10
ADD A,E ;EXPECT: CYCLES=4 A=0x96 E=0x0C F=0x00
ADD A,H ;EXPECT: CYCLES=4 A=0x5C H=0xC6 F=0x10
ADD A,L ;EXPECT: CYCLES=4 A=0x5C L=0x00 F=0x00
ADD A,(HL) ;EXPECT: CYCLES=8 A=0x5E MEM[0xC600]=0x02 F=0x00
ADD A,A ;EXPECT: CYCLES=4 A=0xBC F=0x00
LD A,0x05 ;EXPECT: CYCLES=4 A=0x05
ADC A,B ;EXPECT: CYCLES=4 A=0x0B B=0x06 F=0x00
ADC A,C ;EXPECT: CYCLES=4 A=0x8B C=0x80 F=0x00
ADC A,D ;EXPECT: CYCLES=4 A=0x8B D=0xFF F=0x10 
ADC A,E ;EXPECT: CYCLES=4 A=0x96 E=0x0C F=0x00
ADC A,H ;EXPECT: CYCLES=4 A=0x5C H=0xC6 F=0x10
ADC A,L ;EXPECT: CYCLES=4 A=0x5C L=0x00 F=0x00
ADC A,(HL) ;EXPECT: CYCLES=8 A=0x5E MEM[0xC600]=0x02 F=0x00
ADC A,A ;EXPECT: CYCLES=4 A=0xBC F=0x00
LD A, 0x10 ;EXPECT: CYCLES=8 A=0x10
LD B, 0x04 ;EXPECT: CYCLES=8 B=0x04
SUB B ;EXPECT: A=0x0C B=0x04 F=0x30 CYCLES=4
LD C,1 ;EXPECT: CYCLES=8 C=0x01
SUB C ;EXPECT: CYCLES=4 A=0x0B C=0x01
LD D,2 ;EXPECT: CYCLES=8 D=0x02
SUB D ;EXPECT: CYCLES=4 A=0x09 D=0x02
LD E,3 ;EXPECT: CYCLES=8 E=0x03
SUB E ;EXPECT: CYCLES=4 A=0x06 E=0x03
LD H,0x02 ;EXPECT: CYCLES=8 H=0x02
SUB H ;EXPECT: CYCLES=4 A=0x04 H=0x02
SUB L ;EXPECT: CYCLES=4 A=0x04 L=0x00
LD HL, 0xC600 ;EXPECT: CYCLES=12 HL=0xC600
LD (HL),0x05 ;EXPECT: CYCLES=12 MEM[0xC600]=0x05 HL=0xC600
LD A,0x06 ;EXPECT: CYCLES=8 A=0x06
SUB (HL) ;EXPECT: CYCLES=8 A=0x01 MEM[0xC600]=0x05 HL=0x0C600
SUB A ;EXPECT: CYCLES=4 A=0x00 F=0x80

LD A,0x10 ;EXPECT: CYCLES=8 A=0x10 

LD A,0x02
LD B,0x02
LD C,0x03
LD D,0x04
LD E,0x0A
LD H,0x06
LD L,0x07
LD (HL),0x08

SBC A,B ;EXPECT: CYCLES=4 A=0x00 B=0x02 F=0xF0
SBC A,C ;EXPECT: CYCLES=4 A=0xFD C=0x03 F=0x40
SBC A,D ;EXPECT: CYCLES=4 A=0xF9 D=0x04 F=0x70
SBC A,E ;EXPECT: CYCLES=4 A=0xEF E=0x0A F=0x70 
SBC A,H ;EXPECT: CYCLES=4 A=0xE9 H=0x06 F=0x60
SBC A,L ;EXPECT: CYCLES=4 A=0xE2 L=0x70 F=0xE0
LD HL,0xC600
LD (HL),0x80
SBC A,(HL) ;EXPECT: CYCLES=4 MEM[0xC600]=0x80 A=0x62 F=0x70
SBC A,A ;EXPECT: CYCLES=4 A=0x00 F=0xC0

LD A,0x02
LD B,0x02
AND B ;EXPECT: CYCLES=4 A=0x02 F=0x20
LD A, 0x02
LD C, 0x03
AND C ;EXPECT: CYCLES=4 A=0x00 F=0x50
LD A,0xF0
LD D,0x80
AND D ;EXPECT: CYCLES=4 A=0x80 F=0x20
LD A,0xF0
LD E,0x80
AND E ;EXPECT: CYCLES=4 A=0x80
LD A,0xF0
LD H,0x80
AND H ;EXPECT: CYCLES=4 A=0x80
LD A,0xF0
LD L,0x80
AND L ;EXPECT: CYCLES=4 A=0x80
LD A,0xF0
LD HL,0xC600
LD (HL),0x80
AND (HL) ;EXPECT: CYCLES=8 A=0x80
AND A ;EXPECT: CYCLES=4 A=0x80

LD A,0xF0
LD B,0x0F
XOR B ;EXPECT: CYCLES=4 A=0xFF F=0x00
LD C,0xF0
XOR C ;EXPECT: CYCLES=4 A=0x0F F=0x00
LD D,0x0F
XOR D ;EXPECT: CYCLES=4 A=0x00 F=0x80
LD E, 0x04
XOR E ;EXPECT: CYCLES=4 A=0x04 F=0x00
LD H, 0xAA
XOR H ;EXPECT: CYCLES=4 A=0xAE F=0x00
LD L, 0xAE
XOR L ;EXPECT: CYCLES=4 A=0x00 F=0x00
LD HL,0xC600
XOR (HL) ;EXPECT: CYCLES=8 A=0x80 F=0x00
XOR A ;EXPECT: CYCLES=4 A=0x00 F=0x80

LD A,0xF0
LD B,0x0F
OR B ;EXPECT: CYCLES=4 A=0xFF F=0x00
LD C,0xF0
OR C ;EXPECT: CYCLES=4 A=0xFF F=0x00
LD D,0x00
OR D ;EXPECT: CYCLES=4 A=0x00 F=0x80
LD E, 0x04
OR E ;EXPECT: CYCLES=4 A=0x04 F=0x00
LD H, 0xAA
OR H ;EXPECT: CYCLES=4 A=0xAE F=0x00
LD L, 0xAE
OR L ;EXPECT: CYCLES=4 A=0xAE F=0x00
LD HL,0xC600
OR (HL) ;EXPECT: CYCLES=8 A=0xAE F=0x00
OR A ;EXPECT: CYCLES=4 A=0xAE F=0x00

LD B,0xFF
LD A,0xFF
CP B ;EXPECT: CYCLES=4 A=0xFF B=0xFF F=0xC0
LD C,0xF1
CP C ;EXPECT: CYCLES=4 A=0xFF C=0xF1 F=0x40
LD D, 0xFF
LD A, 0xF1
CP D ;EXPECT: CYCLES=4 A=0xF1 D=0xFF F=0x70
LD E, 0x02
CP E ;EXPECT: CYCLES=4 A=0xF1 E=0x02 F=0x60
LD A,0x80
LD H,0x90
CP H ;EXPECT: CYCLES=4 A=0x80 H=0x90 F=0x50
LD L,0x00
CP L ;EXPECT: CYCLES=4 A=0x80 L=0x00 F=0x40
LD HL, 0xC600
CP (HL) ;EXPECT: CYCLES=8 A=0x80 MEM[0xC600]=0x80 F=0xC0
LD A,0xFF
CP A ;EXPECT: CYCLES=4 A=0x00

LD A,0xFF
ADD A,0x01 ;EXPECT: CYCLES=8 A=0x00 F=0xB0
ADC A,0x01 ;EXPECT: CYCLES=8 A=0x02 F=0x00
SUB A,0x03 ;EXPECT: CYCLES=8 A=0xFF F=0x40
SBC A,0x01 ;EXPECT: CYCLES=8 A=0xFE F=0x70

LD A,0xF0
AND 0x80 ;EXPECT: CYCLES=8 A=0x80 F=0x20
CP 0x01 ;EXPECT: CYCLES=8 A=0x80 F=0x50
XOR 0x81 ;EXPECT: CYCLES=8 A=0x01 F=0x00

LDH 0x01,A ;EXPECT: CYCLES=12 MEM[0xFF01]=0x01 A=0x01
LD A,0x00
LDH A,0x01 ;EXPECT: CYCLES=12 A=0x01 MEM[0xFF01]=0x01

LD A,0x0001 ;EXPECT: CYCLES=16 A=0x00 F=0x01
LD C,0x01
LD A,(C) ;EXPECT: CYCLES=12 A=0x01 MEM[0xFF01]=0x01
LD (0xFF02),A ;EXPECT: CYCLES=16 MEM[0xFF02]=0x01 A=0x01
LD A=0x02
LD C,0x02
LD (C),A ;EXPECT: CYCLES=12 MEM[0xFF02]=0x02 A=0x02
OR 0x80;EXPECT: CYCLES=8 A=0x82 F=0x00

LD L,0x11
RST 00H ;EXPECT: CYCLES=16
BRSTA: NOP ;EXPECT: L=0x00
RST 08H ;EXPECT: CYCLES=16
BRSTB: NOP ;EXPECT: L=0x08
RST 10H ;EXPECT: CYCLES=16
BRSTC: NOP ;EXPECT: L=0x10
RST 18H ;EXPECT: CYCLES=16
BRSTD: NOP ;EXPECT: L=0x18
RST 20H ;EXPECT: CYCLES=16
BRSTE: NOP ;EXPECT: L=0x20
RST 28H ;EXPECT: CYCLES=16
BRSTF: NOP ;EXPECT: L=0x28
RST 30H ;EXPECT: CYCLES=16
BRSTG: NOP ;EXPECT: L=0x30
RST 38H ;EXPECT: CYCLES=16
BRSTH: NOP ;EXPECT: L=0x38

LD A,0x00
JR 0x01 ;EXPECT: CYCLES=12
LD A,0x01
NOP ;EXPECT: A=0x00

LD A,0x00
XOR 0x01 ;EXPECT: F=0x00
JR NZ,0x01 ;EXPECT: CYCLES=8
LD A,0x01
NOP ;EXPECT: A=0x01

XOR 0x00 ;EXPECT: F=0x80
JR NZ,0x01;EXPECT: CYCLES=12
LD A,0x00
NOP ;EXPECT: A=0x01

OR 0x01 ;EXPECT: A=0x01 F=0x00
JR Z,0x01 ;EXPECT: CYCLES=8
LD A,0x00
NOP ;EXPECT: A=0x00

XOR 0x00 ;EXPECT: A=0x00 F=0x80
JR Z,0x01 ;EXPECT: CYCLES=12
LD A,0x01
NOP ;EXPECT: A=0x00

SCF
CCF
LD A,0x00
JR C,0x01 ;EXPECT: CYCLES=8
LD A,0x01
NOP ;EXPECT: A=0x00
CCF
JR C,0x01 ;EXPECT: CYCLES=12
LD A,0x01
NOP ;EXPECT: A=0x01

XOR 0x01 ;EXPECT: A=0x00 F=0x80
JP NZ,JP_TEST_NZ ;EXPECT: CYCLES=12
LD A,0x01
JP_TEST_NZ: NOP ;EXPECT: A=0x01

OR 0x01 ;EXPECT: A=0x01 F=0x00
JP NZ,JP_TEST_NZ_J ;EXPECT: CYCLES=16
LD A,0x05
JP_TEST_NZ_J: NOP ;EXPECT: A=0x01

LD A,0x00
JP JPTEST ;EXPECT: CYCLES=16
LD A,0x01
JPTEST: NOP ;EXPECT: A=0x00

OR 0x01 ;EXPECT: A=0x01 F=0x00
JP Z,JP_TEST_Z ;EXPECT: CYCLES=12
LD A,0x02
JP_TEST_Z: NOP ;EXPECT: A=0x02

XOR 0x02 ;EXPECT: A=0x00 F=0x80
JP Z, JP_TEST_Z_J;EXPECT: CYCLES=16
LD A,0x02
JP_TEST_Z_J: NOP ;EXPECT: A=0x00

SCF
JP NC,JP_TEST_NC ;EXPECT: CYCLES=12
LD A,0x01
JP_TEST_NC: NOP ;EXPECT: A=0x01

CCF
JP NC,JP_TEST_NC_J ;EXPECT: CYCLES=16
LD A,0x02
JP_TEST_NC_J: NOP ;EXPECT: A=0x01

JP C,JP_TEST_C ;EXPECT: CYCLES=12
LD A,0x02
JP_TEST_C: NOP ;EXPECT: A=0x02

SCF
JP, C,JP_TEST_C_J ;EXPECT: CYCLES=16
LD A,0x01
JP_TEST_C_J: NOP ;EXPECT: A=0x02

LD HL, 0xC600
LD (HL),JP_TEST_MEM
LD A,0x00
JP (HL) ;EXPECT: CYCLES=4
LD A,0x01
JP_TEST_MEM: NOP ;EXPECT: A=0x00

LD D,0x00
CALL FUNCTION_ONE ;EXPECT: CYCLES=24
NOP ;EXPECT: D=0x05

LD A,0x00
LD D,0x00
OR 0x00 ;EXPECT: F=0x80
CALL NZ,FUNCTION_ONE ;EXPECT: CYCLES=12
NOP ;EXPECT: D=0x00

OR 0x01 ;EXPECT: F=0x00
CALL NZ,FUNCTION_ONE ;EXPECT: CYCLES=24
NOP ;EXPECT: D=0x05

LD D,0x00
CCF
CALL C,FUNCTION_ONE ;EXPECT: CYCLES=12
NOP ;EXPECT: D=0x00

SCF
CALL C,FUNCTION_ONE ;EXPECT: CYCLES=24
NOP ;EXPECT: D=0x05

LD D,0x00
CALL NC,FUNCTION_ONE ;EXPECT: CYCLES=12
NOP ;EXPECT: D=0x00

CCF
CALL NC,FUNCTION_ONE ;EXPECT: CYCLES=24
NOP ;EXPECT: D=0x05

LD A,0x00
LD D,0x00
OR 0x01 ;EXPECT: A=0x01 F=0x00
CALL Z,FUNCTION_ONE ;EXPECT: CYCLES=12
NOP ;EXPECT: D=0x00

XOR 0x01 ;EXPECT: A=0x00 F=0x80
CALL Z,FUNCTION_ONE ;EXPECT: CYCLES=24
NOP ;EXPECT: D=0x05

LD A,0x0F
ADD 0x01 
DAA ;EXPECT: CYCLES=4 A=0x16
LD A,0xF0
ADD 0x10
DAA ;EXPECT: CYCLES=4 A=0x60
LD A,0xFF
ADD 0x01
DAA ;EXPECT: CYCLES=4 A=0x66

LD A,0x01
OR 0x01 ;EXPECT: A=0x01 F=0x00
CALL TEST_Z
NOP ;EXPECT: A=0x80

LD A,0x01
XOR 0x01 ;EXPECT: A=0x00 F=0x80
CALL TEST_Z_J
NOP ;EXPECT: A=0x00

CALL TEST_NZ
NOP ;EXPECT: A=0x80

LD A,0x01
OR 0x01 ;EXPECT: A=0x01 F=0x00
CALL TEST_NZ_J
NOP ;EXPECT: A=0x00

SCF
CCF
CALL TEST_C
NOP ;EXPECT: A=0x80

SCF
CALL TEST_C_J
NOP ;EXPECT: A=0x00

CALL TEST_NC
NOP ;EXPECT: A=0x80

CCF
CALL TEST_NC_J
NOP ;EXPECT: A=0x00

CALL TEST_RET
NOP ;EXPECT: A=0x00

DI ;EXPECT: CYCLES=4 INTERRUPTS=0

CALL TEST_RETI
NOP ;EXPECT: A=0x00 INTERRUPTS=1

DI ;EXPECT: CYCLES=4 INTERRUPTS=0

EI ;EXPECT: CYCLES=4 INTERRUPTS=1

LD B,0x07 ;EXPECT: 00000110 8+4 12 
SCF
RLC B ;EXPECT: CYCLES=8 F=0x00 B=0x0C
LD C,0xFF
RLC C ;EXPECT: CYCLES=8 F=0x10 C=0xFF
CCF
LD D,0x40
RLC D ;EXPECT: CYCLES=8 D=0x80 F=0x00
CCF
LD E,0x80
RLC E ;EXPECT: CYCLES=8 E=0x01 F=0x10
LD H,0x01
RLC H ;EXPECT: CYCLES=8 H=0x02 F=0x00
LD L,0x08 
RLC L ;EXPECT: CYCLES=8 L=0x10 F=0x00
LD HL,0xC600
LD (HL) 0x00
RLC (HL) ;EXPECT: CYCLES=12 MEM[0xC600]=0x00 F=0x80
SCF
LD A,0x11
RLC A ;EXPECT: CYCLES=8 A=0x22 F=0x00

SCF
RRC B ;EXPECT: CYCLES=8 B=0x07 F=0x00
RRC C ;EXPECT: CYCLES=8 C=0xFF F=0x10
CCF
RRC D ;EXPECT: CYCLES=8 D=0x40 F=0x00
CCF
RRC E ;EXPECT: CYCLES=8 E=0x80 F=0x10
LD H,0x02
RRC H ;EXPECT: CYCLES=8 H=0x01 F=0x00
LD L,0x10
RRC L ;EXPECT: CYCLES=8 L=0x08 F=0x00
LD HL,0xC600
RRC (HL) ;EXPECT: CYCLES=12 MEM[0xC600]=0x00 F=0x80
RRC A ;EXPECT: CYCLES=8 A=0x11 F=0x00

SCF
LD B, 0x80
RL B ;EXPECT: CYCLES=8 B=0x01 F=0x10
CCF
RL C ;EXPECT: CYCLES=8 C=0xFE F=0x10
RL D ;EXPECT: CYCLES=8 D=0x81 F=0x00
RL E ;EXPECT: CYCLES=8 E=0x00 F=0x90
LD H,0x01
RL H ;EXPECT: CYCLES=8 H=0x03 F=0x00
LD L,0x08
RL L ;EXPECT: CYCLES=8 L=0x10 F=0x00
LD HL,0xC600
RL (HL) ;EXPECT: CYCLES=12 MEM[0xC600]=0x00 F=0x80
RL A ;EXPECT: CYCLES=8 A=0x22 F=0x00

SCF
RR B ;EXPECT: CYCLES=8 B=0x01 F=0x10
CCF
RR C ;EXPECT: CYCLES=8 C=0xFF F=0x00
RR D ;EXPECT: CYCLES=8 D=0x40 F=0x10
RR E ;EXPECT: CYCLES=8 E=0x80 F=0x00
LD H,0x03
RR H ;EXPECT: CYCLES=8 H=0x01 F=0x10
LD L,0x10
RR L ;EXPECT: CYCLES=8 L=0x88 F=0x00
RR (HL) ;EXPECT: CYCLES=12
RR A ;EXPECT: CYCLES=8 A=0x11 F=0x00

SLA B ;EXPECT: CYCLES=8 B=0x02 F=0x00
SLA C ;EXPECT: CYCLES=8 C=0xFE F=0x10
SLA D ;EXPECT: CYCLES=8 D=0x80 F=0x00
SLA E ;EXPECT: CYCLES=8 E=0x00 F=0x90
LD H,0x01
SLA H ;EXPECT: CYCLES=8 H=0x02 F=0x00
LD L,0x88
SLA L ;EXPECT: CYCLES=8 L=0x10 F=0x10
LD HL,0xC600
SLA (HL) ;EXPECT: CYCLES=12 MEM[0xC600]=0x00 F=0x80
SLA A ;EXPECT: CYCLES=8 A=0x22 F=0x00

SRA B ;EXPECT: CYCLES=8 B=0x01 F=0x00
SRA C ;EXPECT: CYCLES=8 C=0xFF F=0x00
SRA D ;EXPECT: CYCLES=8 D=0x40 F=0x00
LD E,0x01
SRA E ;EXPECT: CYCLES=8 E=0x00 F=0x90 
LD H,0x02
SRA H ;EXPECT: CYCLES=8 H=0x01 F=0x00
LD L,0x10
SRA L ;EXPECT: CYCLES=8 L =0x08 F=0x00
LD HL,0xC600
SRA (HL) ;EXPECT: CYCLES=12 MEM[0xC600]=0x00 F=0x80
SRA A ;EXPECT: CYCLES=8 A=0x11 F=0x00

SWAP B ;EXPECT: CYCLES=8 B=0x10 F=0x00
SWAP C ;EXPECT: CYCLES=8 C=0xFF F=0x00
SWAP D ;EXPECT: CYCLES=8 D=0x04 F=0x00
SWAP E ;EXPECT: CYCLES=8 E=0x00 F=0x80
SWAP H ;EXPECT: CYCLES=8 H=0x6C F=0x00
SWAP L ;EXPECT: CYCLES=8 L=0x00 F=0x80
LD HL,0xC600
LD (HL),0x50
SWAP (HL) ;EXPECT: CYCLES=12 MEM[0xC600]=0x05 F=0x00
SWAP A ;EXPECT: CYCLES=8 A=0x11 F=0x00

SRL B ;EXPECT: CYCLES=8 B=0x08 F=0x00
SRL C ;EXPECT: CYCLES=8 C=0x7F F=0x10
SRL D ;EXPECT: CYCLES=8 D=0x02 F=0x00
SRL E ;EXPECT: CYCLES=8 E=0x00 F=0x80
SRL H ;EXPECT: CYCLES=8 H=0x63 F=0x00
SRL L ;EXPECT: CYCLES=8 L=0x00 F=0x80
LD HL,0xC600
SRL (HL) ;EXPECT: CYCLES=12 MEM[0xC600]=0x02 F=0x10
SRL A ;EXPECT: CYCLES=8 A=0x08 F=0x10

LD BC, 0xFFFF
LD DE, 0xFFFF
LD HL, 0xFFFF
LD A, 0xFF
RES 0,B ;EXPECT: CYCLES=8 B=0xFE
RES 0,C ;EXPECT: CYCLES=8 C=0xFE
RES 0,D ;EXPECT: CYCLES=8 D=0xFE
RES 0,E ;EXPECT: CYCLES=8 E=0xFE
RES 0,H ;EXPECT: CYCLES=8 H=0xFE
RES 0,L ;EXPECT: CYCLES=8 L=0xFE
RES 0,A ;EXPECT: CYCLES=8 A=0xFE
RES 1,B ;EXPECT: CYCLES=8 B=0xFC
RES 1,C ;EXPECT: CYCLES=8 C=0xFC
RES 1,D ;EXPECT: CYCLES=8 D=0xFC
RES 1,E ;EXPECT: CYCLES=8 E=0xFC
RES 1,H ;EXPECT: CYCLES=8 H=0xFC
RES 1,L ;EXPECT: CYCLES=8 L=0xFC
RES 1,A ;EXPECT: CYCLES=8 A=0xFC
RES 2,B ;EXPECT: CYCLES=8 B=0xF8
RES 2,C ;EXPECT: CYCLES=8 C=0xF8
RES 2,D ;EXPECT: CYCLES=8 D=0xF8
RES 2,E ;EXPECT: CYCLES=8 E=0xF8
RES 2,H ;EXPECT: CYCLES=8 H=0xF8
RES 2,L ;EXPECT: CYCLES=8 L=0xF8
RES 2,A ;EXPECT: CYCLES=8 A=0xF8
RES 3,B ;EXPECT: CYCLES=8 B=0xF0
RES 3,C ;EXPECT: CYCLES=8 C=0xF0
RES 3,D ;EXPECT: CYCLES=8 D=0xF0
RES 3,E ;EXPECT: CYCLES=8 E=0xF0
RES 3,H ;EXPECT: CYCLES=8 H=0xF0
RES 3,L ;EXPECT: CYCLES=8 L=0xF0
RES 3,A ;EXPECT: CYCLES=8 A=0xF0

RES 4,B ;EXPECT: CYCLES=8 B=0xE0
RES 4,C ;EXPECT: CYCLES=8 C=0xE0
RES 4,D ;EXPECT: CYCLES=8 D=0xE0
RES 4,E ;EXPECT: CYCLES=8 E=0xE0
RES 4,H ;EXPECT: CYCLES=8 H=0xE0
RES 4,L ;EXPECT: CYCLES=8 L=0xE0
RES 4,A ;EXPECT: CYCLES=8 A=0xE0

RES 5,B ;EXPECT: CYCLES=8 B=0xC0
RES 5,C ;EXPECT: CYCLES=8 C=0xC0
RES 5,D ;EXPECT: CYCLES=8 D=0xC0
RES 5,E ;EXPECT: CYCLES=8 E=0xC0
RES 5,H ;EXPECT: CYCLES=8 H=0xC0
RES 5,L ;EXPECT: CYCLES=8 L=0xC0
RES 5,A ;EXPECT: CYCLES=8 A=0xC0

RES 6,B ;EXPECT: CYCLES=8 B=0x80
RES 6,C ;EXPECT: CYCLES=8 C=0x80
RES 6,D ;EXPECT: CYCLES=8 D=0x80
RES 6,E ;EXPECT: CYCLES=8 E=0x80
RES 6,H ;EXPECT: CYCLES=8 H=0x80
RES 6,L ;EXPECT: CYCLES=8 L=0x80
RES 6,A ;EXPECT: CYCLES=8 A=0x80

RES 7,B ;EXPECT: CYCLES=8 B=0x00
RES 7,C ;EXPECT: CYCLES=8 C=0x00
RES 7,D ;EXPECT: CYCLES=8 D=0x00
RES 7,E ;EXPECT: CYCLES=8 E=0x00
RES 7,H ;EXPECT: CYCLES=8 H=0x00
RES 7,L ;EXPECT: CYCLES=8 L=0x00
RES 7,A ;EXPECT: CYCLES=8 A=0x00

LD HL, 0xC600
LD (HL), 0xFF
RES 0,(HL) ;EXPECT: CYCLES=12 MEM[0xC600]=0xFE
RES 1,(HL) ;EXPECT: CYCLES=12 MEM[0xC600]=0xFC
RES 2,(HL) ;EXPECT: CYCLES=12 MEM[0xC600]=0xF8
RES 3,(HL) ;EXPECT: CYCLES=12 MEM[0xC600]=0xF0
RES 4,(HL) ;EXPECT: CYCLES=12 MEM[0xC600]=0xE0
RES 5,(HL) ;EXPECT: CYCLES=12 MEM[0xC600]=0xC0
RES 6,(HL) ;EXPECT: CYCLES=12 MEM[0xC600]=0x80
RES 7,(HL) ;EXPECT: CYCLES=12 MEM[0xC600]=0x00

LD HL, 0x0000

SET 0,B ;EXPECT: CYCLES=8 B=0x01
SET 0,C ;EXPECT: CYCLES=8 C=0x01
SET 0,D ;EXPECT: CYCLES=8 D=0x01
SET 0,E ;EXPECT: CYCLES=8 E=0x01
SET 0,H ;EXPECT: CYCLES=8 H=0x01
SET 0,L ;EXPECT: CYCLES=8 L=0x01
SET 0,A ;EXPECT: CYCLES=8 A=0x01
SET 1,B ;EXPECT: CYCLES=8 B=0x03
SET 1,C ;EXPECT: CYCLES=8 C=0x03
SET 1,D ;EXPECT: CYCLES=8 D=0x03
SET 1,E ;EXPECT: CYCLES=8 E=0x03
SET 1,H ;EXPECT: CYCLES=8 H=0x03
SET 1,L ;EXPECT: CYCLES=8 L=0x03
SET 1,A ;EXPECT: CYCLES=8 A=0x03
SET 2,B ;EXPECT: CYCLES=8 B=0x07
SET 2,C ;EXPECT: CYCLES=8 C=0x07
SET 2,D ;EXPECT: CYCLES=8 D=0x07
SET 2,E ;EXPECT: CYCLES=8 E=0x07
SET 2,H ;EXPECT: CYCLES=8 H=0x07
SET 2,L ;EXPECT: CYCLES=8 L=0x07
SET 2,A ;EXPECT: CYCLES=8 A=0x07
SET 3,B ;EXPECT: CYCLES=8 B=0x0F
SET 3,C ;EXPECT: CYCLES=8 C=0x0F
SET 3,D ;EXPECT: CYCLES=8 D=0x0F
SET 3,E ;EXPECT: CYCLES=8 E=0x0F
SET 3,H ;EXPECT: CYCLES=8 H=0x0F
SET 3,L ;EXPECT: CYCLES=8 L=0x0F
SET 3,A ;EXPECT: CYCLES=8 A=0x0F
SET 4,B ;EXPECT: CYCLES=8 B=0x1F
SET 4,C ;EXPECT: CYCLES=8 C=0x1F
SET 4,D ;EXPECT: CYCLES=8 D=0x1F
SET 4,E ;EXPECT: CYCLES=8 E=0x1F
SET 4,H ;EXPECT: CYCLES=8 H=0x1F
SET 4,L ;EXPECT: CYCLES=8 L=0x1F
SET 4,A ;EXPECT: CYCLES=8 A=0x1F
SET 5,B ;EXPECT: CYCLES=8 B=0x3F
SET 5,C ;EXPECT: CYCLES=8 C=0x3F
SET 5,D ;EXPECT: CYCLES=8 D=0x3F
SET 5,E ;EXPECT: CYCLES=8 E=0x3F
SET 5,H ;EXPECT: CYCLES=8 H=0x3F
SET 5,L ;EXPECT: CYCLES=8 L=0x3F
SET 5,A ;EXPECT: CYCLES=8 A=0x3F
SET 6,B ;EXPECT: CYCLES=8 B=0x7F
SET 6,C ;EXPECT: CYCLES=8 C=0x7F
SET 6,D ;EXPECT: CYCLES=8 D=0x7F
SET 6,E ;EXPECT: CYCLES=8 E=0x7F
SET 6,H ;EXPECT: CYCLES=8 H=0x7F
SET 6,L ;EXPECT: CYCLES=8 L=0x7F
SET 6,A ;EXPECT: CYCLES=8 A=0x7F
SET 7,B ;EXPECT: CYCLES=8 B=0xFF
SET 7,C ;EXPECT: CYCLES=8 C=0xFF
SET 7,D ;EXPECT: CYCLES=8 D=0xFF
SET 7,E ;EXPECT: CYCLES=8 E=0xFF
SET 7,H ;EXPECT: CYCLES=8 H=0xFF
SET 7,L ;EXPECT: CYCLES=8 L=0xFF
SET 7,A ;EXPECT: CYCLES=8 A=0xFF

LD HL,0xC600
SET 0,(HL) ;EXPECT: CYCLES=12 MEM[0xC600]=0x01
SET 1,(HL) ;EXPECT: CYCLES=12 MEM[0xC600]=0x03
SET 2,(HL) ;EXPECT: CYCLES=12 MEM[0xC600]=0x07
SET 3,(HL) ;EXPECT: CYCLES=12 MEM[0xC600]=0x0F
SET 4,(HL) ;EXPECT: CYCLES=12 MEM[0xC600]=0x1F
SET 5,(HL) ;EXPECT: CYCLES=12 MEM[0xC600]=0x3F
SET 6,(HL) ;EXPECT: CYCLES=12 MEM[0xC600]=0x7F
SET 7,(HL) ;EXPECT: CYCLES=12 MEM[0xC600]=0xFF

LD B,0xFF
LD C,0xF0
LD D,0x0F
LD E,0xAA
LD H,0x55
LD L,0x00
LD A,0x81
SCF
CCF
BIT 0,B ;EXPECT: CYCLES=8 B=0xFF F=0x20
BIT 0,C ;EXPECT: CYCLES=8 C=0xF0 F=0xA0
BIT 0,D ;EXPECT: CYCLES=8 D=0x0F F=0x20
BIT 0,E ;EXPECT: CYCLES=8 E=0xAA F=0xA0
BIT 0,H ;EXPECT: CYCLES=8 H=0x55 F=0x20
BIT 0,L ;EXPECT: CYCLES=8 L=0x00 F=0xA0
BIT 0,A ;EXPECT: CYCLES=8 A=0x81 F=0x20
BIT 1,B ;EXPECT: CYCLES=8 B=0xFF F=0x20
BIT 1,C ;EXPECT: CYCLES=8 C=0xF0 F=0xA0
BIT 1,D ;EXPECT: CYCLES=8 D=0x0F F=0x20
BIT 1,E ;EXPECT: CYCLES=8 E=0xAA F=0x20
BIT 1,H ;EXPECT: CYCLES=8 H=0x55 F=0xA0
BIT 1,L ;EXPECT: CYCLES=8 L=0x00 F=0xA0
BIT 1,A ;EXPECT: CYCLES=8 A=0x81 F=0xA0
BIT 2,B ;EXPECT: CYCLES=8 B=0xFF F=0x20
BIT 2,C ;EXPECT: CYCLES=8 C=0xF0 F=0xA0
BIT 2,D ;EXPECT: CYCLES=8 D=0x0F F=0x20
BIT 2,E ;EXPECT: CYCLES=8 E=0xAA F=0xA0
BIT 2,H ;EXPECT: CYCLES=8 H=0x55 F=0x20
BIT 2,L ;EXPECT: CYCLES=8 L=0x00 F=0xA0
BIT 2,A ;EXPECT: CYCLES=8 A=0x81 F=0xA0
BIT 3,B ;EXPECT: CYCLES=8 B=0xFF F=0x20
BIT 3,C ;EXPECT: CYCLES=8 C=0xF0 F=0xA0
BIT 3,D ;EXPECT: CYCLES=8 D=0x0F F=0x20
BIT 3,E ;EXPECT: CYCLES=8 E=0xAA F=0x20
BIT 3,H ;EXPECT: CYCLES=8 H=0x55 F=0xA0
BIT 3,L ;EXPECT: CYCLES=8 L=0x00 F=0xA0
BIT 3,A ;EXPECT: CYCLES=8 A=0x81 F=0xA0
BIT 4,B ;EXPECT: CYCLES=8 B=0xFF F=0x20
BIT 4,C ;EXPECT: CYCLES=8 C=0xF0 F=0x20
BIT 4,D ;EXPECT: CYCLES=8 D=0x0F F=0xA0
BIT 4,E ;EXPECT: CYCLES=8 E=0xAA F=0xA0
BIT 4,H ;EXPECT: CYCLES=8 H=0x55 F=0x20
BIT 4,L ;EXPECT: CYCLES=8 L=0x00 F=0xA0
BIT 4,A ;EXPECT: CYCLES=8 A=0x81 F=0xA0
BIT 5,B ;EXPECT: CYCLES=8 B=0xFF F=0x20
BIT 5,C ;EXPECT: CYCLES=8 C=0xF0 F=0x20
BIT 5,D ;EXPECT: CYCLES=8 D=0x0F F=0xA0
BIT 5,E ;EXPECT: CYCLES=8 E=0xAA F=0x20
BIT 5,H ;EXPECT: CYCLES=8 H=0x55 F=0xA0
BIT 5,L ;EXPECT: CYCLES=8 L=0x00 F=0xA0
BIT 5,A ;EXPECT: CYCLES=8 A=0x81 F=0xA0
BIT 6,B ;EXPECT: CYCLES=8 B=0xFF F=0x20
BIT 6,C ;EXPECT: CYCLES=8 C=0xF0 F=0x20
BIT 6,D ;EXPECT: CYCLES=8 D=0x0F F=0xA0
BIT 6,E ;EXPECT: CYCLES=8 E=0xAA F=0xA0
BIT 6,H ;EXPECT: CYCLES=8 H=0x55 F=0x20
BIT 6,L ;EXPECT: CYCLES=8 L=0x00 F=0xA0
BIT 6,A ;EXPECT: CYCLES=8 A=0x81 F=0xA0
BIT 7,B ;EXPECT: CYCLES=8 B=0xFF F=0x20
BIT 7,C ;EXPECT: CYCLES=8 C=0xF0 F=0x20
BIT 7,D ;EXPECT: CYCLES=8 D=0x0F F=0xA0
BIT 7,E ;EXPECT: CYCLES=8 E=0xAA F=0x20
BIT 7,H ;EXPECT: CYCLES=8 H=0x55 F=0xA0
BIT 7,L ;EXPECT: CYCLES=8 L=0x00 F=0xA0
BIT 7,A ;EXPECT: CYCLES=8 A=0x81 F=0x20

LD HL, 0xC600
LD (HL),0xFF
BIT 0,(HL) ;EXPECT: CYCLES=16 MEM[0xC600]=0xFF F=0x20
BIT 1,(HL) ;EXPECT: CYCLES=16 MEM[0xC600]=0xFF F=0x20
BIT 2,(HL) ;EXPECT: CYCLES=16 MEM[0xC600]=0xFF F=0x20
BIT 3,(HL) ;EXPECT: CYCLES=16 MEM[0xC600]=0xFF F=0x20
BIT 4,(HL) ;EXPECT: CYCLES=16 MEM[0xC600]=0xFF F=0x20
BIT 5,(HL) ;EXPECT: CYCLES=16 MEM[0xC600]=0xFF F=0x20
BIT 6,(HL) ;EXPECT: CYCLES=16 MEM[0xC600]=0xFF F=0x20
BIT 7,(HL) ;EXPECT: CYCLES=16 MEM[0xC600]=0xFF F=0x20

HALT ;EXPECT: CYCLES=4
NOP
STOP 0 ;EXPECT: CYCLES=4

FUNCTION_ONE:
LD D,0x05
RET

RET Z ;EXPECT: CYCLES=8
RET Z ;EXPECT: CYCLES=20
RET NZ ;EXPECT: CYCLES=8
RET NZ ;EXPECT: CYCLES=20
RET ;EXPECT: CYCLES=16
RET C ;EXPECT: CYCLES=8
RET C ;EXPECT: CYCLES=20
RETI ;EXPECT: CYCLES=16
RET NC ;EXPECT: CYCLES=8
RET NC ;EXPECT: CYCLES=20

TEST_Z:
LD A,0x00
RET Z ;EXPECT: CYCLES=8
LD A,0x80
RET ;EXPECT: CYCLES=16

TEST_Z_J:
LD A,0x00
RET Z ;EXPECT: CYCLES=20
LD A,0x80
RET ;EXPECT: CYCLES=16

TEST_C:
LD A,0x00
RET C ;EXPECT: CYCLES=8
LD A,0x80
RET ;EXPECT: CYCLES=16

TEST_C_J:
LD A,0x00
RET C ;EXPECT: CYCLES=20
LD A,0x80
RET ;EXPECT: CYCLES=16

TEST_NC:
LD A,0x00
RET NC ;EXPECT: CYCLES=8
LD A,0x80
RET ;EXPECT: CYCLES=16

TEST_NC_J:
LD A,0x00
RET NC ;EXPECT: CYCLES=20
LD A,0x80
RET ;EXPECT: CYCLES=16

TEST_NZ:
LD A,0x00
RET NZ ;EXPECT: CYCLES=8
LD A,0x80
RET ;EXPECT: CYCLES=16

TEST_NZ_J:
LD A,0x00
RET NZ ;EXPECT: CYCLES=20
LD A,0x80
RET ;EXPECT: CYCLES=16

TEST_RET:
LD A,0x00
RET ;EXPECT: CYCLES=16
LD A,0x80
RET ;EXPECT: CYCLES=16

TEST_RETI:
LD A,0x00
RETI ;EXPECT: CYCLES=16
LD A,0x80
RET ;EXPECT: CYCLES=16
